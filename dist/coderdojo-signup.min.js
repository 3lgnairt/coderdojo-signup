angular.module("coderdojo-signup",["ui.router","ui.bootstrap","ui.bootstrap.tpls"]),function(){function e(e,t,o){}angular.module("coderdojo-signup").controller("AcceptController",e),e.$inject=["$scope","$rootScope","$state"]}(),function(){function e(e,t){function o(){function o(e){console.log("submit form success",e),i.spotsLeft=e.number,i.spotsLeft<=0&&t.go("closed")}function n(e){console.log("get number of ninjas err",e)}e.get("/api/registerNinja").then(o,n)}function n(){console.log("Spots",i.spotsLeft);var e={firstName:"",lastName:"",birthday:new Date(2008,9,5),under12:!1,activities:[{name:"Scratch",selected:!1},{name:"Edison Robots",selected:!1},{name:"Raspberry Pi",selected:!1},{name:"Game Maker",selected:!1},{name:"LEGO Mindstorm Robots",selected:!1},{name:"Website Development",selected:!1},{name:"Other",selected:!1}]};i.form.ninjas.length>=i.spotsLeft?alert("Unfortunately there are only "+i.spotsLeft+" spots left for this event. Therefore, you cannot register more than "+i.spotsLeft+" ninjas at this time. Please contact your local CoderDojo champion if you have any questions"):i.form.ninjas.push(e)}function r(e){var t=i.form.ninjas.indexOf(e);t>=0&&i.form.ninjas.splice(t,1)}function a(e){var t=new Date(2003,9,5),o=Math.abs(t-e.birthday);return 0>o}function s(){function o(e){console.log("submit form success",e),t.go("accept")}function n(e){console.log("submit form err",e),t.go("error")}if(confirm("Is all the information correct? You will not be able to go back and edit it.")){console.log(i.form);for(var r=0;r<i.form.ninjas.length;r++)i.form.ninjas[r].under12=a(i.form.ninjas[r]);var s={method:"POST",url:"/api/registerNinja",header:{"Content-Type":"application/json"},data:{form:i.form}};e(s).then(o,n)}}var i=this;i.spotsLeft=t.params.spotsLeft,i.minDate=new Date(1998,9,5),i.maxDate=new Date(2008,9,5),i.form={ninjas:[{firstName:"",lastName:"",birthday:new Date(2008,9,5),under12:!1,activities:[{name:"Scratch",selected:!1},{name:"Edison Robots",selected:!1},{name:"Raspberry Pi",selected:!1},{name:"Game Maker",selected:!1},{name:"LEGO Mindstorm Robots",selected:!1},{name:"Website Development",selected:!1},{name:"Other",selected:!1}]}],bwContact:{firstName:"",lastName:""},parent:{firstName:"",lastName:"",email:"",phone:""},photoPermission:!1,comments:""},i.add=n,i.remove=r,i.register=s,o()}angular.module("coderdojo-signup").controller("FormController",e),e.$inject=["$http","$state"]}(),angular.module("coderdojo-signup").controller("ViewController",["$scope","$http","$state",function(e,t,o){"use strict";e.ninjaCount=0,e.ninjas={},e.isUnder12=function(e){var t=Math.abs(e.getTime()-(new Date).getTime()),o=Math.ceil(t/31536e6);return 12>o},e.getNinjaCount=function(){return ninjaCount++,ninjaCount},t.get("/api/ninjaList").success(function(t){e.ninjas=t;for(var o=0;o<e.ninjas.length;o++)for(var n=0;n<e.ninjas[o].ninjas.length;n++)e.ninjas[o].ninjas[n].under12=isUnder12(e.ninjas[o].ninjas[n].birthday)}).error(function(e){})}]),function(){function e(e,t){t.otherwise("/form"),e.state("form",{url:"/form",templateProvider:["$templateCache",function(e){return e.get("app/form/form.html")}],controller:"FormController",controllerAs:"vm"}).state("accept",{url:"/accept",templateProvider:["$templateCache",function(e){return e.get("app/accept/accept.html")}],controller:"AcceptController",controllerAs:"vm"}).state("error",{url:"/error",templateProvider:["$templateCache",function(e){return e.get("app/error/error.html")}]}).state("view",{url:"/view",templateProvider:["$templateCache",function(e){return e.get("app/view/view.html")}],controller:"ViewController"}).state("closed",{url:"/closed",templateProvider:["$templateCache",function(e){return e.get("app/closed/closed.html")}]})}angular.module("coderdojo-signup").config(e),e.$inject=["$stateProvider","$urlRouterProvider"]}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImFjY2VwdC9hY2NlcHRDb250cm9sbGVyLmpzIiwiZm9ybS9mb3JtQ29udHJvbGxlci5qcyIsInZpZXcvdmlld0NvbnRyb2xsZXIuanMiLCJjb21wb25lbnRzL2NvbmZpZy9jb25maWcuanMiXSwibmFtZXMiOlsiYW5ndWxhciIsIm1vZHVsZSIsIkFjY2VwdENvbnRyb2xsZXIiLCIkc2NvcGUiLCIkcm9vdFNjb3BlIiwiJHN0YXRlIiwiY29udHJvbGxlciIsIiRpbmplY3QiLCJGb3JtQ29udHJvbGxlciIsIiRodHRwIiwiaW5pdGlhbGlzZSIsInN1Y2Nlc3MiLCJyZXNwb25zZSIsImNvbnNvbGUiLCJsb2ciLCJ2bSIsInNwb3RzTGVmdCIsIm51bWJlciIsImdvIiwiZXJyb3IiLCJlcnIiLCJnZXQiLCJ0aGVuIiwiYWRkIiwibmluamEiLCJmaXJzdE5hbWUiLCJsYXN0TmFtZSIsImJpcnRoZGF5IiwiRGF0ZSIsInVuZGVyMTIiLCJhY3Rpdml0aWVzIiwibmFtZSIsInNlbGVjdGVkIiwiZm9ybSIsIm5pbmphcyIsImxlbmd0aCIsImFsZXJ0IiwicHVzaCIsInJlbW92ZSIsImluZGV4IiwiaW5kZXhPZiIsInNwbGljZSIsImNhbGNVbmRlcjEyIiwiaXMxMiIsImRpZmYiLCJNYXRoIiwiYWJzIiwicmVnaXN0ZXIiLCJjb25maXJtIiwiaSIsInJlcSIsIm1ldGhvZCIsInVybCIsImhlYWRlciIsIkNvbnRlbnQtVHlwZSIsImRhdGEiLCJ0aGlzIiwicGFyYW1zIiwibWluRGF0ZSIsIm1heERhdGUiLCJid0NvbnRhY3QiLCJwYXJlbnQiLCJlbWFpbCIsInBob25lIiwicGhvdG9QZXJtaXNzaW9uIiwiY29tbWVudHMiLCJuaW5qYUNvdW50IiwiaXNVbmRlcjEyIiwiZGF0ZSIsInRpbWVEaWZmIiwiZ2V0VGltZSIsImRpZmZZZWFycyIsImNlaWwiLCJnZXROaW5qYUNvdW50IiwiaiIsImNvbmZpZyIsIiRzdGF0ZVByb3ZpZGVyIiwiJHVybFJvdXRlclByb3ZpZGVyIiwib3RoZXJ3aXNlIiwic3RhdGUiLCJ0ZW1wbGF0ZVByb3ZpZGVyIiwiJHRlbXBsYXRlQ2FjaGUiLCJjb250cm9sbGVyQXMiXSwibWFwcGluZ3MiOiJBQUFBQSxRQUFBQyxPQUFBLG9CQUFBLFlBQUEsZUFBQSxzQkNBQSxXQVdBLFFBQUFDLEdBQUFDLEVBQUFDLEVBQUFDLElBVkFMLFFBQ0FDLE9BQUEsb0JBQ0FLLFdBQUEsbUJBQUFKLEdBRUFBLEVBQUFLLFNBQ0EsU0FDQSxhQUNBLGFDUkEsV0FVQSxRQUFBQyxHQUFBQyxFQUFBSixHQXFDQSxRQUFBSyxLQUtBLFFBQUFDLEdBQUFDLEdBQ0FDLFFBQUFDLElBQUEsc0JBQUFGLEdBQ0FHLEVBQUFDLFVBQUFKLEVBQUFLLE9BRUFGLEVBQUFDLFdBQUEsR0FDQVgsRUFBQWEsR0FBQSxVQUlBLFFBQUFDLEdBQUFDLEdBQ0FQLFFBQUFDLElBQUEsMkJBQUFNLEdBZEFYLEVBQ0FZLElBQUEsc0JBQ0FDLEtBQUFYLEVBQUFRLEdBZ0JBLFFBQUFJLEtBQ0FWLFFBQUFDLElBQUEsUUFBQUMsRUFBQUMsVUFDQSxJQUFBUSxJQUNBQyxVQUFBLEdBQUFDLFNBQUEsR0FBQUMsU0FBQSxHQUFBQyxNQUFBLEtBQUEsRUFBQSxHQUFBQyxTQUFBLEVBQUFDLGFBQ0FDLEtBQUEsVUFBQUMsVUFBQSxJQUNBRCxLQUFBLGdCQUFBQyxVQUFBLElBQ0FELEtBQUEsZUFBQUMsVUFBQSxJQUNBRCxLQUFBLGFBQUFDLFVBQUEsSUFDQUQsS0FBQSx3QkFBQUMsVUFBQSxJQUNBRCxLQUFBLHNCQUFBQyxVQUFBLElBQ0FELEtBQUEsUUFBQUMsVUFBQSxJQUlBakIsR0FBQWtCLEtBQUFDLE9BQUFDLFFBQUFwQixFQUFBQyxVQUNBb0IsTUFBQSxnQ0FBQXJCLEVBQUFDLFVBQUEsd0VBQUFELEVBQUFDLFVBQ0EsZ0dBR0FELEVBQUFrQixLQUFBQyxPQUFBRyxLQUFBYixHQUlBLFFBQUFjLEdBQUFkLEdBQ0EsR0FBQWUsR0FBQXhCLEVBQUFrQixLQUFBQyxPQUFBTSxRQUFBaEIs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UUFDQTNCLElBQUEsUUFDQTRCLGtCQUFBLGlCQUFBLFNBQUFDLEdBQ0EsTUFBQUEsR0FBQTVELElBQUEsd0JBRUFmLFdBQUEsaUJBQ0E0RSxhQUFBLE9BRUFILE1BQUEsVUFDQTNCLElBQUEsVUFDQTRCLGtCQUFBLGlCQUFBLFNBQUFDLEdBQ0EsTUFBQUEsR0FBQTVELElBQUEsNEJBRUFmLFdBQUEsbUJBQ0E0RSxhQUFBLE9BRUFILE1BQUEsU0FDQTNCLElBQUEsU0FDQTRCLGtCQUFBLGlCQUFBLFNBQUFDLEdBQ0EsTUFBQUEsR0FBQTVELElBQUEsNEJBR0EwRCxNQUFBLFFBQ0EzQixJQUFBLFFBQ0E0QixrQkFBQSxpQkFBQSxTQUFBQyxHQUNBLE1BQUFBLEdBQUE1RCxJQUFBLHdCQUVBZixXQUFBLG1CQUVBeUUsTUFBQSxVQUNBM0IsSUFBQSxVQUNBNEIsa0JBQUEsaUJBQUEsU0FBQUMsR0FDQSxNQUFBQSxHQUFBNUQsSUFBQSw4QkE3Q0FyQixRQUNBQyxPQUFBLG9CQUNBMEUsT0FBQUEsR0FFQUEsRUFBQXBFLFNBQ0EsaUJBQ0EiLCJmaWxlIjoiY29kZXJkb2pvLXNpZ251cC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJhbmd1bGFyLm1vZHVsZSgnY29kZXJkb2pvLXNpZ251cCcsIFsndWkucm91dGVyJywgJ3VpLmJvb3RzdHJhcCcsICd1aS5ib290c3RyYXAudHBscyddKTsiLCIoZnVuY3Rpb24oKSB7XG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCdjb2RlcmRvam8tc2lnbnVwJylcbiAgICAgICAgLmNvbnRyb2xsZXIoJ0FjY2VwdENvbnRyb2xsZXInLCBBY2NlcHRDb250cm9sbGVyKTtcblxuICAgIEFjY2VwdENvbnRyb2xsZXIuJGluamVjdCA9IFtcbiAgICAgICAgJyRzY29wZScsXG4gICAgICAgICckcm9vdFNjb3BlJyxcbiAgICAgICAgJyRzdGF0ZSdcbiAgICBdO1xuXG4gICAgZnVuY3Rpb24gQWNjZXB0Q29udHJvbGxlcigkc2NvcGUsICRyb290U2NvcGUsICRzdGF0ZSkge1xuICAgICAgICB2YXIgdm0gPSB0aGlzO1xuXG5cbiAgICB9XG59KSgpO1xuIiwiKGZ1bmN0aW9uICgpIHtcbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ2NvZGVyZG9qby1zaWdudXAnKVxuICAgICAgICAuY29udHJvbGxlcignRm9ybUNvbnRyb2xsZXInLCBGb3JtQ29udHJvbGxlcik7XG5cbiAgICBGb3JtQ29udHJvbGxlci4kaW5qZWN0ID0gW1xuICAgICAgICAnJGh0dHAnLFxuICAgICAgICAnJHN0YXRlJ1xuICAgIF07XG5cbiAgICBmdW5jdGlvbiBGb3JtQ29udHJvbGxlcigkaHR0cCwgJHN0YXRlKSB7XG4gICAgICAgIHZhciB2bSA9IHRoaXM7XG5cbiAgICAgICAgdm0uc3BvdHNMZWZ0ID0gJHN0YXRlLnBhcmFtcy5zcG90c0xlZnQ7XG5cbiAgICAgICAgdm0ubWluRGF0ZSA9IG5ldyBEYXRlKDE5OTgsIDksIDUpO1xuICAgICAgICB2bS5tYXhEYXRlID0gbmV3IERhdGUoMjAwOCwgOSwgNSk7XG5cbiAgICAgICAgdm0uZm9ybSA9IHtcbiAgICAgICAgICAgIG5pbmphczogW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgZmlyc3ROYW1lOiAnJywgbGFzdE5hbWU6ICcnLCBiaXJ0aGRheTogbmV3IERhdGUoMjAwOCwgOSwgNSksIHVuZGVyMTI6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBhY3Rpdml0aWVzOiBbXG4gICAgICAgICAgICAgICAgICAgICAgeyBuYW1lOiAnU2NyYXRjaCcsIHNlbGVjdGVkOiBmYWxzZSB9LFxuICAgICAgICAgICAgICAgICAgICAgIHsgbmFtZTogJ0VkaXNvbiBSb2JvdHMnLCBzZWxlY3RlZDogZmFsc2UgfSxcbiAgICAgICAgICAgICAgICAgICAgICB7IG5hbWU6ICdSYXNwYmVycnkgUGknLCBzZWxlY3RlZDogZmFsc2UgfSxcbiAgICAgICAgICAgICAgICAgICAgICB7IG5hbWU6ICdHYW1lIE1ha2VyJywgc2VsZWN0ZWQ6IGZhbHNlIH0sXG4gICAgICAgICAgICAgICAgICAgICAgeyBuYW1lOiAnTEVHTyBNaW5kc3Rvcm0gUm9ib3RzJywgc2VsZWN0ZWQ6IGZhbHNlIH0sXG4gICAgICAgICAgICAgICAgICAgICAgeyBuYW1lOiAnV2Vic2l0ZSBEZXZlbG9wbWVudCcsIHNlbGVjdGVkOiBmYWxzZSB9LFxuICAgICAgICAgICAgICAgICAgICAgIHsgbmFtZTogJ090aGVyJywgc2VsZWN0ZWQ6IGZhbHNlIH1cbiAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBid0NvbnRhY3Q6IHsgZmlyc3ROYW1lOiAnJywgbGFzdE5hbWU6ICcnfSxcbiAgICAgICAgICAgIHBhcmVudDoge1xuICAgICAgICAgICAgICAgIGZpcnN0TmFtZTogJycsIGxhc3ROYW1lOiAnJywgZW1haWw6ICcnLCBwaG9uZTogJydcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwaG90b1Blcm1pc3Npb246IGZhbHNlLFxuICAgICAgICAgICAgY29tbWVudHM6ICcnXG4gICAgICAgIH07XG5cbiAgICAgICAgdm0uYWRkID0gYWRkO1xuICAgICAgICB2bS5yZW1vdmUgPSByZW1vdmU7XG4gICAgICAgIHZtLnJlZ2lzdGVyID0gcmVnaXN0ZXI7XG5cbiAgICAgICAgaW5pdGlhbGlzZSgpO1xuXG4gICAgICAgIGZ1bmN0aW9uIGluaXRpYWxpc2UoKSB7XG4gICAgICAgICAgJGh0dHBcbiAgICAgICAgICAgIC5nZXQoJy9hcGkvcmVnaXN0ZXJOaW5qYScpXG4gICAgICAgICAgICAudGhlbihzdWNjZXNzLCBlcnJvcik7XG5cbiAgICAgICAgICBmdW5jdGlvbiBzdWNjZXNzKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdzdWJtaXQgZm9ybSBzdWNjZXNzJywgcmVzcG9uc2UpO1xuICAgICAgICAgICAgICB2bS5zcG90c0xlZnQgPSByZXNwb25zZS5udW1iZXI7XG5cbiAgICAgICAgICAgICAgaWYodm0uc3BvdHNMZWZ0IDw9IDApIHtcbiAgICAgICAgICAgICAgICAkc3RhdGUuZ28oJ2Nsb3NlZCcpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgZnVuY3Rpb24gZXJyb3IoZXJyKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdnZXQgbnVtYmVyIG9mIG5pbmphcyBlcnInLCBlcnIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGFkZCgpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdTcG90cycsIHZtLnNwb3RzTGVmdCk7XG4gICAgICAgICAgICB2YXIgbmluamEgPSB7XG4gICAgICAgICAgICAgICAgZmlyc3ROYW1lOiAnJywgbGFzdE5hbWU6ICcnLCBiaXJ0aGRheTogbmV3IERhdGUoMjAwOCwgOSwgNSksIHVuZGVyMTI6IGZhbHNlLCBhY3Rpdml0aWVzOiBbXG4gICAgICAgICAgICAgICAgICB7IG5hbWU6ICdTY3JhdGNoJywgc2VsZWN0ZWQ6IGZhbHNlIH0sXG4gICAgICAgICAgICAgICAgICB7IG5hbWU6ICdFZGlzb24gUm9ib3RzJywgc2VsZWN0ZWQ6IGZhbHNlIH0sXG4gICAgICAgICAgICAgICAgICB7IG5hbWU6ICdSYXNwYmVycnkgUGknLCBzZWxlY3RlZDogZmFsc2UgfSxcbiAgICAgICAgICAgICAgICAgIHsgbmFtZTogJ0dhbWUgTWFrZXInLCBzZWxlY3RlZDogZmFsc2UgfSxcbiAgICAgICAgICAgICAgICAgIHsgbmFtZTogJ0xFR08gTWluZHN0b3JtIFJvYm90cycsIHNlbGVjdGVkOiBmYWxzZSB9LFxuICAgICAgICAgICAgICAgICAgeyBuYW1lOiAnV2Vic2l0ZSBEZXZlbG9wbWVudCcsIHNlbGVjdGVkOiBmYWxzZSB9LFxuICAgICAgICAgICAgICAgICAgeyBuYW1lOiAnT3RoZXInLCBzZWxlY3RlZDogZmFsc2UgfVxuICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGlmICh2bS5mb3JtLm5pbmphcy5sZW5ndGggPj0gdm0uc3BvdHNMZWZ0KSB7XG4gICAgICAgICAgICAgICAgYWxlcnQoJ1VuZm9ydHVuYXRlbHkgdGhlcmUgYXJlIG9ubHkgJyArIHZtLnNwb3RzTGVmdCArICcgc3BvdHMgbGVmdCBmb3IgdGhpcyBldmVudC4gVGhlcmVmb3JlLCB5b3UgY2Fubm90IHJlZ2lzdGVyIG1vcmUgdGhhbiAnICsgdm0uc3BvdHNMZWZ0ICtcbiAgICAgICAgICAgICAgICAgICAgJyBuaW5qYXMgYXQgdGhpcyB0aW1lLiBQbGVhc2UgY29udGFjdCB5b3VyIGxvY2FsIENvZGVyRG9qbyBjaGFtcGlvbiBpZiB5b3UgaGF2ZSBhbnkgcXVlc3Rpb25zJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2bS5mb3JtLm5pbmphcy5wdXNoKG5pbmphKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHJlbW92ZShuaW5qYSkge1xuICAgICAgICAgICAgdmFyIGluZGV4ID0gdm0uZm9ybS5uaW5qYXMuaW5kZXhPZihuaW5qYSk7XG5cbiAgICAgICAgICAgIGlmIChpbmRleCA+PSAwKSB7XG4gICAgICAgICAgICAgICAgdm0uZm9ybS5uaW5qYXMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGNhbGNVbmRlcjEyKG5pbmphKSB7XG4gICAgICAgICAgICB2YXIgaXMxMiA9IG5ldyBEYXRlICgyMDAzLCA5LCA1KTtcbiAgICAgICAgICAgIHZhciBkaWZmID0gTWF0aC5hYnMoaXMxMiAtIG5pbmphLmJpcnRoZGF5KTtcblxuICAgICAgICAgICAgcmV0dXJuIGRpZmYgPCAwO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gcmVnaXN0ZXIoKSB7XG4gICAgICAgICAgICBpZiAoY29uZmlybSgnSXMgYWxsIHRoZSBpbmZvcm1hdGlvbiBjb3JyZWN0PyBZb3Ugd2lsbCBub3QgYmUgYWJsZSB0byBnbyBiYWNrIGFuZCBlZGl0IGl0LicpKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2codm0uZm9ybSk7XG5cbiAgICAgICAgICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgdm0uZm9ybS5uaW5qYXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdm0uZm9ybS5uaW5qYXNbaV0udW5kZXIxMiA9IGNhbGNVbmRlcjEyKHZtLmZvcm0ubmluamFzW2ldKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgcmVxID0ge1xuICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICAgICAgdXJsOiAnL2FwaS9yZWdpc3Rlck5pbmphJyxcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtmb3JtOiB2bS5mb3JtfVxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAkaHR0cChyZXEpXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKHN1Y2Nlc3MsIGVycm9yKTtcblxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHN1Y2Nlc3MocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3N1Ym1pdCBmb3JtIHN1Y2Nlc3MnLCByZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICAgICRzdGF0ZS5nbygnYWNjZXB0Jyk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gZXJyb3IoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdzdWJtaXQgZm9ybSBlcnInLCBlcnIpO1xuICAgICAgICAgICAgICAgICAgICAkc3RhdGUuZ28oJ2Vycm9yJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufSkoKTtcbiIsIi8vIFRPRE86IHVwZGF0ZSB0aGlzXG5hbmd1bGFyLm1vZHVsZSgnY29kZXJkb2pvLXNpZ251cCcpXG4uY29udHJvbGxlcignVmlld0NvbnRyb2xsZXInLCBmdW5jdGlvbigkc2NvcGUsICRodHRwLCAkc3RhdGUpIHtcblx0J3VzZSBzdHJpY3QnO1xuXHQkc2NvcGUubmluamFDb3VudCA9IDA7XG5cblx0JHNjb3BlLm5pbmphcyA9IHt9O1xuXG5cdCRzY29wZS5pc1VuZGVyMTIgPSBmdW5jdGlvbihkYXRlKSB7XG5cdFx0dmFyIHRpbWVEaWZmID0gTWF0aC5hYnMoZGF0ZS5nZXRUaW1lKCkgLSBuZXcgRGF0ZSgpLmdldFRpbWUoKSk7XG5cdFx0dmFyIGRpZmZZZWFycyA9IE1hdGguY2VpbCh0aW1lRGlmZiAvICgxMDAwICogMzYwMCAqIDI0ICogMzY1KSk7XG5cblx0XHRyZXR1cm4gZGlmZlllYXJzIDwgMTI7XG5cdH1cblxuXHQkc2NvcGUuZ2V0TmluamFDb3VudCA9IGZ1bmN0aW9uKCkge1xuXHRcdG5pbmphQ291bnQrKztcblx0XHRyZXR1cm4gbmluamFDb3VudDtcblx0fTtcblxuXHQkaHR0cC5nZXQoJy9hcGkvbmluamFMaXN0Jylcblx0LnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xuXHRcdCRzY29wZS5uaW5qYXMgPSBkYXRhO1xuXG5cdFx0Zm9yKHZhciBpID0gMDsgaSA8ICRzY29wZS5uaW5qYXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdGZvcih2YXIgaiA9IDA7IGogPCAkc2NvcGUubmluamFzW2ldLm5pbmphcy5sZW5ndGg7IGorKykge1xuXHRcdFx0XHQkc2NvcGUubmluamFzW2ldLm5pbmphc1tqXS51bmRlcjEyID0gaXNVbmRlcjEyKCRzY29wZS5uaW5qYXNbaV0ubmluamFzW2pdLmJpcnRoZGF5KTtcblx0XHRcdH1cblx0XHR9XG5cdH0pXG5cdC5lcnJvcihmdW5jdGlvbihkYXRhKSB7XG5cblx0fSk7XG59KTtcbiIsIihmdW5jdGlvbiAoKSB7XG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCdjb2RlcmRvam8tc2lnbnVwJylcbiAgICAgICAgLmNvbmZpZyhjb25maWcpO1xuXG4gICAgY29uZmlnLiRpbmplY3QgPSBbXG4gICAgICAgICckc3RhdGVQcm92aWRlcicsXG4gICAgICAgICckdXJsUm91dGVyUHJvdmlkZXInXG4gICAgXTtcblxuICAgIGZ1bmN0aW9uIGNvbmZpZygkc3RhdGVQcm92aWRlciwgJHVybFJvdXRlclByb3ZpZGVyKSB7XG4gICAgICAgICR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoJy9mb3JtJyk7XG5cbiAgICAgICAgJHN0YXRlUHJvdmlkZXJcbiAgICAgICAgICAgIC5zdGF0ZSgnZm9ybScsIHtcbiAgICAgICAgICAgICAgICB1cmw6ICcvZm9ybScsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVQcm92aWRlcjogZnVuY3Rpb24gKCR0ZW1wbGF0ZUNhY2hlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAkdGVtcGxhdGVDYWNoZS5nZXQoJ2FwcC9mb3JtL2Zvcm0uaHRtbCcpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ0Zvcm1Db250cm9sbGVyJyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyQXM6ICd2bSdcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuc3RhdGUoJ2FjY2VwdCcsIHtcbiAgICAgICAgICAgICAgICB1cmw6ICcvYWNjZXB0JyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVByb3ZpZGVyOiBmdW5jdGlvbiAoJHRlbXBsYXRlQ2FjaGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICR0ZW1wbGF0ZUNhY2hlLmdldCgnYXBwL2FjY2VwdC9hY2NlcHQuaHRtbCcpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ0FjY2VwdENvbnRyb2xsZXInLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJ1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5zdGF0ZSgnZXJyb3InLCB7XG4gICAgICAgICAgICAgICAgdXJsOiAnL2Vycm9yJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVByb3ZpZGVyOiBmdW5jdGlvbiAoJHRlbXBsYXRlQ2FjaGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICR0ZW1wbGF0ZUNhY2hlLmdldCgnYXBwL2Vycm9yL2Vycm9yLmh0bWwnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnN0YXRlKCd2aWV3Jywge1xuICAgICAgICAgICAgICAgIHVybDogJy92aWV3JyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVByb3ZpZGVyOiBmdW5jdGlvbiAoJHRlbXBsYXRlQ2FjaGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICR0ZW1wbGF0ZUNhY2hlLmdldCgnYXBwL3ZpZXcvdmlldy5odG1sJyk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnVmlld0NvbnRyb2xsZXInXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnN0YXRlKCdjbG9zZWQnLCB7XG4gICAgICAgICAgICAgICAgdXJsOiAnL2Nsb3NlZCcsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVQcm92aWRlcjogZnVuY3Rpb24gKCR0ZW1wbGF0ZUNhY2hlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAkdGVtcGxhdGVDYWNoZS5nZXQoJ2FwcC9jbG9zZWQvY2xvc2VkLmh0bWwnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICB9XG59KSgpO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
