angular.module("coderdojo-signup",["ui.router","ui.bootstrap","ui.bootstrap.tpls"]),function(){function e(e,t,o){}angular.module("coderdojo-signup").controller("AcceptController",e),e.$inject=["$scope","$rootScope","$state"]}(),function(){function e(e,t){function o(){function t(e){console.log("submit form success",e),i.spotsLeft=e.number}function o(e){console.log("get number of ninjas err",e)}e.get("/api/registerNinja").then(t,o)}function n(){console.log("Spots",i.spotsLeft);var e={firstName:"",lastName:"",birthday:new Date(2008,9,5),under12:!1,activities:[{name:"Scratch",selected:!1},{name:"Edison Robots",selected:!1},{name:"LEGO Mindstorm Robots",selected:!1},{name:"Website Development",selected:!1},{name:"Other",selected:!1}]};i.form.ninjas.length>=i.spotsLeft?alert("Unfortunately there are only "+i.spotsLeft+" spots left for this event. Therefore, you cannot register more than "+i.spotsLeft+" ninjas at this time. Please contact your local CoderDojo champion if you have any questions"):i.form.ninjas.push(e)}function r(e){var t=i.form.ninjas.indexOf(e);t>=0&&i.form.ninjas.splice(t,1)}function a(e){var t=new Date(2003,9,5),o=Math.abs(t-e.birthday);return 0>o}function s(){function o(e){console.log("submit form success",e),t.go("accept")}function n(e){console.log("submit form err",e),t.go("error")}if(confirm("Is all the information correct? You will not be able to go back and edit it.")){console.log(i.form);for(var r=0;r<i.form.ninjas.length;r++)i.form.ninjas[r].under12=a(i.form.ninjas[r]);var s={method:"POST",url:"/api/registerNinja",header:{"Content-Type":"application/json"},data:{form:i.form}};e(s).then(o,n)}}var i=this;i.spotsLeft=t.params.spotsLeft,i.minDate=new Date(1998,9,5),i.maxDate=new Date(2008,9,5),i.form={ninjas:[{firstName:"",lastName:"",birthday:new Date(2008,9,5),under12:!1,activities:[{name:"Scratch",selected:!1},{name:"Edison Robots",selected:!1},{name:"LEGO Mindstorm Robots",selected:!1},{name:"Website Development",selected:!1},{name:"Other",selected:!1}]}],bwContact:{firstName:"",lastName:""},parent:{firstName:"",lastName:"",email:"",phone:""},photoPermission:!1,comments:""},i.add=n,i.remove=r,i.register=s,o()}angular.module("coderdojo-signup").controller("FormController",e),e.$inject=["$http","$state"]}(),angular.module("coderdojo-signup").controller("ViewController",["$scope","$http","$state",function(e,t,o){"use strict";e.ninjaCount=0,e.ninjas={},e.getNinjaCount=function(){return ninjaCount++,ninjaCount},t.get("/api/ninjaList").success(function(t){e.ninjas=t}).error(function(e){})}]),function(){function e(e,t){t.otherwise("/form"),e.state("form",{url:"/form",templateProvider:["$templateCache",function(e){return e.get("app/form/form.html")}],controller:"FormController",controllerAs:"vm"}).state("accept",{url:"/accept",templateProvider:["$templateCache",function(e){return e.get("app/accept/accept.html")}],controller:"AcceptController",controllerAs:"vm"}).state("error",{url:"/error",templateProvider:["$templateCache",function(e){return e.get("app/error/error.html")}]}).state("closed",{url:"/closed",templateProvider:["$templateCache",function(e){return e.get("app/closed/closed.html")}]}).state("view",{url:"/view",templateProvider:["$templateCache",function(e){return e.get("app/view/view.html")}],controller:"ViewController"})}angular.module("coderdojo-signup").config(e),e.$inject=["$stateProvider","$urlRouterProvider"]}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImFjY2VwdC9hY2NlcHRDb250cm9sbGVyLmpzIiwiZm9ybS9mb3JtQ29udHJvbGxlci5qcyIsInZpZXcvdmlld0NvbnRyb2xsZXIuanMiLCJjb21wb25lbnRzL2NvbmZpZy9jb25maWcuanMiXSwibmFtZXMiOlsiYW5ndWxhciIsIm1vZHVsZSIsIkFjY2VwdENvbnRyb2xsZXIiLCIkc2NvcGUiLCIkcm9vdFNjb3BlIiwiJHN0YXRlIiwiY29udHJvbGxlciIsIiRpbmplY3QiLCJGb3JtQ29udHJvbGxlciIsIiRodHRwIiwiaW5pdGlhbGlzZSIsInN1Y2Nlc3MiLCJyZXNwb25zZSIsImNvbnNvbGUiLCJsb2ciLCJ2bSIsInNwb3RzTGVmdCIsIm51bWJlciIsImVycm9yIiwiZXJyIiwiZ2V0IiwidGhlbiIsImFkZCIsIm5pbmphIiwiZmlyc3ROYW1lIiwibGFzdE5hbWUiLCJiaXJ0aGRheSIsIkRhdGUiLCJ1bmRlcjEyIiwiYWN0aXZpdGllcyIsIm5hbWUiLCJzZWxlY3RlZCIsImZvcm0iLCJuaW5qYXMiLCJsZW5ndGgiLCJhbGVydCIsInB1c2giLCJyZW1vdmUiLCJpbmRleCIsImluZGV4T2YiLCJzcGxpY2UiLCJjYWxjVW5kZXIxMiIsImlzMTIiLCJkaWZmIiwiTWF0aCIsImFicyIsInJlZ2lzdGVyIiwiZ28iLCJjb25maXJtIiwiaSIsInJlcSIsIm1ldGhvZCIsInVybCIsImhlYWRlciIsIkNvbnRlbnQtVHlwZSIsImRhdGEiLCJ0aGlzIiwicGFyYW1zIiwibWluRGF0ZSIsIm1heERhdGUiLCJid0NvbnRhY3QiLCJwYXJlbnQiLCJlbWFpbCIsInBob25lIiwicGhvdG9QZXJtaXNzaW9uIiwiY29tbWVudHMiLCJuaW5qYUNvdW50IiwiZ2V0TmluamFDb3VudCIsImNvbmZpZyIsIiRzdGF0ZVByb3ZpZGVyIiwiJHVybFJvdXRlclByb3ZpZGVyIiwib3RoZXJ3aXNlIiwic3RhdGUiLCJ0ZW1wbGF0ZVByb3ZpZGVyIiwiJHRlbXBsYXRlQ2FjaGUi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OlsiYW5ndWxhci5tb2R1bGUoJ2NvZGVyZG9qby1zaWdudXAnLCBbJ3VpLnJvdXRlcicsICd1aS5ib290c3RyYXAnLCAndWkuYm9vdHN0cmFwLnRwbHMnXSk7IiwiKGZ1bmN0aW9uKCkge1xuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgnY29kZXJkb2pvLXNpZ251cCcpXG4gICAgICAgIC5jb250cm9sbGVyKCdBY2NlcHRDb250cm9sbGVyJywgQWNjZXB0Q29udHJvbGxlcik7XG5cbiAgICBBY2NlcHRDb250cm9sbGVyLiRpbmplY3QgPSBbXG4gICAgICAgICckc2NvcGUnLFxuICAgICAgICAnJHJvb3RTY29wZScsXG4gICAgICAgICckc3RhdGUnXG4gICAgXTtcblxuICAgIGZ1bmN0aW9uIEFjY2VwdENvbnRyb2xsZXIoJHNjb3BlLCAkcm9vdFNjb3BlLCAkc3RhdGUpIHtcbiAgICAgICAgdmFyIHZtID0gdGhpcztcblxuXG4gICAgfVxufSkoKTtcbiIsIihmdW5jdGlvbiAoKSB7XG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCdjb2RlcmRvam8tc2lnbnVwJylcbiAgICAgICAgLmNvbnRyb2xsZXIoJ0Zvcm1Db250cm9sbGVyJywgRm9ybUNvbnRyb2xsZXIpO1xuXG4gICAgRm9ybUNvbnRyb2xsZXIuJGluamVjdCA9IFtcbiAgICAgICAgJyRodHRwJyxcbiAgICAgICAgJyRzdGF0ZSdcbiAgICBdO1xuXG4gICAgZnVuY3Rpb24gRm9ybUNvbnRyb2xsZXIoJGh0dHAsICRzdGF0ZSkge1xuICAgICAgICB2YXIgdm0gPSB0aGlzO1xuXG4gICAgICAgIHZtLnNwb3RzTGVmdCA9ICRzdGF0ZS5wYXJhbXMuc3BvdHNMZWZ0O1xuXG4gICAgICAgIHZtLm1pbkRhdGUgPSBuZXcgRGF0ZSgxOTk4LCA5LCA1KTtcbiAgICAgICAgdm0ubWF4RGF0ZSA9IG5ldyBEYXRlKDIwMDgsIDksIDUpO1xuXG4gICAgICAgIHZtLmZvcm0gPSB7XG4gICAgICAgICAgICBuaW5qYXM6IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGZpcnN0TmFtZTogJycsIGxhc3ROYW1lOiAnJywgYmlydGhkYXk6IG5ldyBEYXRlKDIwMDgsIDksIDUpLCB1bmRlcjEyOiBmYWxzZSwgYWN0aXZpdGllczogW1xuICAgICAgICAgICAgICAgICAgICB7IG5hbWU6ICdTY3JhdGNoJywgc2VsZWN0ZWQ6IGZhbHNlIH0sXG4gICAgICAgICAgICAgICAgICAgIHsgbmFtZTogJ0VkaXNvbiBSb2JvdHMnLCBzZWxlY3RlZDogZmFsc2UgfSxcbiAgICAgICAgICAgICAgICAgICAgeyBuYW1lOiAnTEVHTyBNaW5kc3Rvcm0gUm9ib3RzJywgc2VsZWN0ZWQ6IGZhbHNlIH0sXG4gICAgICAgICAgICAgICAgICAgIHsgbmFtZTogJ1dlYnNpdGUgRGV2ZWxvcG1lbnQnLCBzZWxlY3RlZDogZmFsc2UgfSxcbiAgICAgICAgICAgICAgICAgICAgeyBuYW1lOiAnT3RoZXInLCBzZWxlY3RlZDogZmFsc2UgfVxuICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgYndDb250YWN0OiB7IGZpcnN0TmFtZTogJycsIGxhc3ROYW1lOiAnJ30sXG4gICAgICAgICAgICBwYXJlbnQ6IHtcbiAgICAgICAgICAgICAgICBmaXJzdE5hbWU6ICcnLCBsYXN0TmFtZTogJycsIGVtYWlsOiAnJywgcGhvbmU6ICcnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcGhvdG9QZXJtaXNzaW9uOiBmYWxzZSxcbiAgICAgICAgICAgIGNvbW1lbnRzOiAnJ1xuICAgICAgICB9O1xuXG4gICAgICAgIHZtLmFkZCA9IGFkZDtcbiAgICAgICAgdm0ucmVtb3ZlID0gcmVtb3ZlO1xuICAgICAgICB2bS5yZWdpc3RlciA9IHJlZ2lzdGVyO1xuXG4gICAgICAgIGluaXRpYWxpc2UoKTtcblxuICAgICAgICBmdW5jdGlvbiBpbml0aWFsaXNlKCkge1xuICAgICAgICAgICRodHRwXG4gICAgICAgICAgICAuZ2V0KCcvYXBpL3JlZ2lzdGVyTmluamEnKVxuICAgICAgICAgICAgLnRoZW4oc3VjY2VzcywgZXJyb3IpO1xuXG4gICAgICAgICAgZnVuY3Rpb24gc3VjY2VzcyhyZXNwb25zZSkge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZygnc3VibWl0IGZvcm0gc3VjY2VzcycsIHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgdm0uc3BvdHNMZWZ0ID0gcmVzcG9uc2UubnVtYmVyO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGZ1bmN0aW9uIGVycm9yKGVycikge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZ2V0IG51bWJlciBvZiBuaW5qYXMgZXJyJywgZXJyKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBhZGQoKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnU3BvdHMnLCB2bS5zcG90c0xlZnQpO1xuICAgICAgICAgICAgdmFyIG5pbmphID0ge1xuICAgICAgICAgICAgICAgIGZpcnN0TmFtZTogJycsIGxhc3ROYW1lOiAnJywgYmlydGhkYXk6IG5ldyBEYXRlKDIwMDgsIDksIDUpLCB1bmRlcjEyOiBmYWxzZSwgYWN0aXZpdGllczogW1xuICAgICAgICAgICAgICAgICAgICB7IG5hbWU6ICdTY3JhdGNoJywgc2VsZWN0ZWQ6IGZhbHNlIH0sXG4gICAgICAgICAgICAgICAgICAgIHsgbmFtZTogJ0VkaXNvbiBSb2JvdHMnLCBzZWxlY3RlZDogZmFsc2UgfSxcbiAgICAgICAgICAgICAgICAgICAgeyBuYW1lOiAnTEVHTyBNaW5kc3Rvcm0gUm9ib3RzJywgc2VsZWN0ZWQ6IGZhbHNlIH0sXG4gICAgICAgICAgICAgICAgICAgIHsgbmFtZTogJ1dlYnNpdGUgRGV2ZWxvcG1lbnQnLCBzZWxlY3RlZDogZmFsc2UgfSxcbiAgICAgICAgICAgICAgICAgICAgeyBuYW1lOiAnT3RoZXInLCBzZWxlY3RlZDogZmFsc2UgfVxuICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGlmICh2bS5mb3JtLm5pbmphcy5sZW5ndGggPj0gdm0uc3BvdHNMZWZ0KSB7XG4gICAgICAgICAgICAgICAgYWxlcnQoJ1VuZm9ydHVuYXRlbHkgdGhlcmUgYXJlIG9ubHkgJyArIHZtLnNwb3RzTGVmdCArICcgc3BvdHMgbGVmdCBmb3IgdGhpcyBldmVudC4gVGhlcmVmb3JlLCB5b3UgY2Fubm90IHJlZ2lzdGVyIG1vcmUgdGhhbiAnICsgdm0uc3BvdHNMZWZ0ICtcbiAgICAgICAgICAgICAgICAgICAgJyBuaW5qYXMgYXQgdGhpcyB0aW1lLiBQbGVhc2UgY29udGFjdCB5b3VyIGxvY2FsIENvZGVyRG9qbyBjaGFtcGlvbiBpZiB5b3UgaGF2ZSBhbnkgcXVlc3Rpb25zJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2bS5mb3JtLm5pbmphcy5wdXNoKG5pbmphKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHJlbW92ZShuaW5qYSkge1xuICAgICAgICAgICAgdmFyIGluZGV4ID0gdm0uZm9ybS5uaW5qYXMuaW5kZXhPZihuaW5qYSk7XG5cbiAgICAgICAgICAgIGlmIChpbmRleCA+PSAwKSB7XG4gICAgICAgICAgICAgICAgdm0uZm9ybS5uaW5qYXMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGNhbGNVbmRlcjEyKG5pbmphKSB7XG4gICAgICAgICAgICB2YXIgaXMxMiA9IG5ldyBEYXRlICgyMDAzLCA5LCA1KTtcbiAgICAgICAgICAgIHZhciBkaWZmID0gTWF0aC5hYnMoaXMxMiAtIG5pbmphLmJpcnRoZGF5KTtcblxuICAgICAgICAgICAgcmV0dXJuIGRpZmYgPCAwO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gcmVnaXN0ZXIoKSB7XG4gICAgICAgICAgICBpZiAoY29uZmlybSgnSXMgYWxsIHRoZSBpbmZvcm1hdGlvbiBjb3JyZWN0PyBZb3Ugd2lsbCBub3QgYmUgYWJsZSB0byBnbyBiYWNrIGFuZCBlZGl0IGl0LicpKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2codm0uZm9ybSk7XG5cbiAgICAgICAgICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgdm0uZm9ybS5uaW5qYXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdm0uZm9ybS5uaW5qYXNbaV0udW5kZXIxMiA9IGNhbGNVbmRlcjEyKHZtLmZvcm0ubmluamFzW2ldKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgcmVxID0ge1xuICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICAgICAgdXJsOiAnL2FwaS9yZWdpc3Rlck5pbmphJyxcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtmb3JtOiB2bS5mb3JtfVxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAkaHR0cChyZXEpXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKHN1Y2Nlc3MsIGVycm9yKTtcblxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHN1Y2Nlc3MocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3N1Ym1pdCBmb3JtIHN1Y2Nlc3MnLCByZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICAgICRzdGF0ZS5nbygnYWNjZXB0Jyk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gZXJyb3IoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdzdWJtaXQgZm9ybSBlcnInLCBlcnIpO1xuICAgICAgICAgICAgICAgICAgICAkc3RhdGUuZ28oJ2Vycm9yJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufSkoKTtcbiIsIi8vIFRPRE86IHVwZGF0ZSB0aGlzXG5hbmd1bGFyLm1vZHVsZSgnY29kZXJkb2pvLXNpZ251cCcpXG4uY29udHJvbGxlcignVmlld0NvbnRyb2xsZXInLCBmdW5jdGlvbigkc2NvcGUsICRodHRwLCAkc3RhdGUpIHtcblx0J3VzZSBzdHJpY3QnO1xuXHQkc2NvcGUubmluamFDb3VudCA9IDA7XG5cblx0JHNjb3BlLm5pbmphcyA9IHt9O1xuXG5cdCRzY29wZS5nZXROaW5qYUNvdW50ID0gZnVuY3Rpb24oKSB7XG5cdFx0bmluamFDb3VudCsrO1xuXHRcdHJldHVybiBuaW5qYUNvdW50O1xuXHR9O1xuXG5cdCRodHRwLmdldCgnL2FwaS9uaW5qYUxpc3QnKVxuXHQuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XG5cdFx0JHNjb3BlLm5pbmphcyA9IGRhdGE7XG5cdH0pXG5cdC5lcnJvcihmdW5jdGlvbihkYXRhKSB7XG5cblx0fSk7XG59KTsiLCIoZnVuY3Rpb24gKCkge1xuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgnY29kZXJkb2pvLXNpZ251cCcpXG4gICAgICAgIC5jb25maWcoY29uZmlnKTtcblxuICAgIGNvbmZpZy4kaW5qZWN0ID0gW1xuICAgICAgICAnJHN0YXRlUHJvdmlkZXInLFxuICAgICAgICAnJHVybFJvdXRlclByb3ZpZGVyJ1xuICAgIF07XG5cbiAgICBmdW5jdGlvbiBjb25maWcoJHN0YXRlUHJvdmlkZXIsICR1cmxSb3V0ZXJQcm92aWRlcikge1xuICAgICAgICAkdXJsUm91dGVyUHJvdmlkZXIub3RoZXJ3aXNlKCcvZm9ybScpO1xuXG4gICAgICAgICRzdGF0ZVByb3ZpZGVyXG4gICAgICAgICAgICAuc3RhdGUoJ2Zvcm0nLCB7XG4gICAgICAgICAgICAgICAgdXJsOiAnL2Zvcm0nLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlUHJvdmlkZXI6IGZ1bmN0aW9uICgkdGVtcGxhdGVDYWNoZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHRlbXBsYXRlQ2FjaGUuZ2V0KCdhcHAvZm9ybS9mb3JtLmh0bWwnKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdGb3JtQ29udHJvbGxlcicsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnN0YXRlKCdhY2NlcHQnLCB7XG4gICAgICAgICAgICAgICAgdXJsOiAnL2FjY2VwdCcsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVQcm92aWRlcjogZnVuY3Rpb24gKCR0ZW1wbGF0ZUNhY2hlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAkdGVtcGxhdGVDYWNoZS5nZXQoJ2FwcC9hY2NlcHQvYWNjZXB0Lmh0bWwnKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdBY2NlcHRDb250cm9sbGVyJyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyQXM6ICd2bSdcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuc3RhdGUoJ2Vycm9yJywge1xuICAgICAgICAgICAgICAgIHVybDogJy9lcnJvcicsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVQcm92aWRlcjogZnVuY3Rpb24gKCR0ZW1wbGF0ZUNhY2hlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAkdGVtcGxhdGVDYWNoZS5nZXQoJ2FwcC9lcnJvci9lcnJvci5odG1sJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5zdGF0ZSgnY2xvc2VkJywge1xuICAgICAgICAgICAgICAgIHVybDogJy9jbG9zZWQnLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlUHJvdmlkZXI6IGZ1bmN0aW9uICgkdGVtcGxhdGVDYWNoZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHRlbXBsYXRlQ2FjaGUuZ2V0KCdhcHAvY2xvc2VkL2Nsb3NlZC5odG1sJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5zdGF0ZSgndmlldycsIHtcbiAgICAgICAgICAgICAgICB1cmw6ICcvdmlldycsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVQcm92aWRlcjogZnVuY3Rpb24gKCR0ZW1wbGF0ZUNhY2hlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAkdGVtcGxhdGVDYWNoZS5nZXQoJ2FwcC92aWV3L3ZpZXcuaHRtbCcpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ1ZpZXdDb250cm9sbGVyJ1xuICAgICAgICAgICAgfSk7XG4gICAgfVxufSkoKTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
