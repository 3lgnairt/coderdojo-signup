angular.module("coderdojo-signup",["ui.router","ui.bootstrap","ui.bootstrap.tpls"]),function(){function e(e,t,n){}angular.module("coderdojo-signup").controller("AcceptController",e),e.$inject=["$scope","$rootScope","$state"]}(),function(){function e(e,t){function n(){function n(e){console.log("submit form success",e),i.spotsLeft=e.number,i.spotsLeft<=0&&t.go("closed")}function o(e){console.log("get number of ninjas err",e)}e.get("/api/registerNinja").then(n,o)}function o(){console.log("Spots",i.spotsLeft);var e={firstName:"",lastName:"",birthday:new Date(2008,9,5),under12:!1,activities:[{name:"Scratch",selected:!1},{name:"Edison Robots",selected:!1},{name:"Raspberry Pi",selected:!1},{name:"Game Maker",selected:!1},{name:"LEGO Mindstorm Robots",selected:!1},{name:"Website Development",selected:!1},{name:"Other",selected:!1}]};i.form.ninjas.length>=i.spotsLeft?alert("Unfortunately there are only "+i.spotsLeft+" spots left for this event. Therefore, you cannot register more than "+i.spotsLeft+" ninjas at this time. Please contact your local CoderDojo champion if you have any questions"):i.form.ninjas.push(e)}function r(e){var t=i.form.ninjas.indexOf(e);t>=0&&i.form.ninjas.splice(t,1)}function a(e){var t=new Date(2003,9,5),n=Math.abs(t-e.birthday);return 0>n}function s(){function n(e){console.log("submit form success",e),t.go("accept")}function o(e){console.log("submit form err",e),t.go("error")}if(confirm("Is all the information correct? You will not be able to go back and edit it.")){console.log(i.form);for(var r=0;r<i.form.ninjas.length;r++)i.form.ninjas[r].under12=a(i.form.ninjas[r]);var s={method:"POST",url:"/api/registerNinja",header:{"Content-Type":"application/json"},data:{form:i.form}};e(s).then(n,o)}}var i=this;i.spotsLeft=t.params.spotsLeft,i.minDate=new Date(1998,9,5),i.maxDate=new Date(2008,9,5),i.form={ninjas:[{firstName:"",lastName:"",birthday:new Date(2008,9,5),under12:!1,activities:[{name:"Scratch",selected:!1},{name:"Edison Robots",selected:!1},{name:"Raspberry Pi",selected:!1},{name:"Game Maker",selected:!1},{name:"LEGO Mindstorm Robots",selected:!1},{name:"Website Development",selected:!1},{name:"Other",selected:!1}]}],bwContact:{firstName:"",lastName:""},parent:{firstName:"",lastName:"",email:"",phone:""},photoPermission:!1,comments:""},i.add=o,i.remove=r,i.register=s,n()}angular.module("coderdojo-signup").controller("FormController",e),e.$inject=["$http","$state"]}(),angular.module("coderdojo-signup").controller("ViewController",["$scope","$http","$state",function(e,t,n){"use strict";e.ninjaCount=0,e.ninjas={},e.isUnder12=function(e){var t=Math.abs(e.getTime()-(new Date).getTime()),n=Math.ceil(t/31536e6);return 12>n},e.getNinjaCount=function(){return ninjaCount++,ninjaCount},t.get("/api/ninjaList").success(function(t){e.ninjas=t;for(var n=0;n<e.ninjas.length;n++)for(var o=0;o<e.ninjas[n].ninjas.length;o++)e.ninjas[n].ninjas[o].under12=isUnder12(e.ninjas[n].ninjas[o].birthday)}).error(function(e){})}]),function(){function e(e,t){t.otherwise("/closed"),e.state("error",{url:"/error",templateProvider:["$templateCache",function(e){return e.get("app/error/error.html")}]}).state("view",{url:"/view",templateProvider:["$templateCache",function(e){return e.get("app/view/view.html")}],controller:"ViewController"}).state("closed",{url:"/closed",templateProvider:["$templateCache",function(e){return e.get("app/closed/closed.html")}]})}angular.module("coderdojo-signup").config(e),e.$inject=["$stateProvider","$urlRouterProvider"]}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImFjY2VwdC9hY2NlcHRDb250cm9sbGVyLmpzIiwiZm9ybS9mb3JtQ29udHJvbGxlci5qcyIsInZpZXcvdmlld0NvbnRyb2xsZXIuanMiLCJjb21wb25lbnRzL2NvbmZpZy9jb25maWcuanMiXSwibmFtZXMiOlsiYW5ndWxhciIsIm1vZHVsZSIsIkFjY2VwdENvbnRyb2xsZXIiLCIkc2NvcGUiLCIkcm9vdFNjb3BlIiwiJHN0YXRlIiwiY29udHJvbGxlciIsIiRpbmplY3QiLCJGb3JtQ29udHJvbGxlciIsIiRodHRwIiwiaW5pdGlhbGlzZSIsInN1Y2Nlc3MiLCJyZXNwb25zZSIsImNvbnNvbGUiLCJsb2ciLCJ2bSIsInNwb3RzTGVmdCIsIm51bWJlciIsImdvIiwiZXJyb3IiLCJlcnIiLCJnZXQiLCJ0aGVuIiwiYWRkIiwibmluamEiLCJmaXJzdE5hbWUiLCJsYXN0TmFtZSIsImJpcnRoZGF5IiwiRGF0ZSIsInVuZGVyMTIiLCJhY3Rpdml0aWVzIiwibmFtZSIsInNlbGVjdGVkIiwiZm9ybSIsIm5pbmphcyIsImxlbmd0aCIsImFsZXJ0IiwicHVzaCIsInJlbW92ZSIsImluZGV4IiwiaW5kZXhPZiIsInNwbGljZSIsImNhbGNVbmRlcjEyIiwiaXMxMiIsImRpZmYiLCJNYXRoIiwiYWJzIiwicmVnaXN0ZXIiLCJjb25maXJtIiwiaSIsInJlcSIsIm1ldGhvZCIsInVybCIsImhlYWRlciIsIkNvbnRlbnQtVHlwZSIsImRhdGEiLCJ0aGlzIiwicGFyYW1zIiwibWluRGF0ZSIsIm1heERhdGUiLCJid0NvbnRhY3QiLCJwYXJlbnQiLCJlbWFpbCIsInBob25lIiwicGhvdG9QZXJtaXNzaW9uIiwiY29tbWVudHMiLCJuaW5qYUNvdW50IiwiaXNVbmRlcjEyIiwiZGF0ZSIsInRpbWVEaWZmIiwiZ2V0VGltZSIsImRpZmZZZWFycyIsImNlaWwiLCJnZXROaW5qYUNvdW50IiwiaiIsImNvbmZpZyIsIiRzdGF0ZVByb3ZpZGVyIiwiJHVybFJvdXRlclByb3ZpZGVyIiwib3RoZXJ3aXNlIiwic3RhdGUiLCJ0ZW1wbGF0ZVByb3ZpZGVyIiwiJHRlbXBsYXRlQ2FjaGUiXSwibWFwcGluZ3MiOiJBQUFBQSxRQUFBQyxPQUFBLG9CQUFBLFlBQUEsZUFBQSxzQkNBQSxXQVdBLFFBQUFDLEdBQUFDLEVBQUFDLEVBQUFDLElBVkFMLFFBQ0FDLE9BQUEsb0JBQ0FLLFdBQUEsbUJBQUFKLEdBRUFBLEVBQUFLLFNBQ0EsU0FDQSxhQUNBLGFDUkEsV0FVQSxRQUFBQyxHQUFBQyxFQUFBSixHQXFDQSxRQUFBSyxLQUtBLFFBQUFDLEdBQUFDLEdBQ0FDLFFBQUFDLElBQUEsc0JBQUFGLEdBQ0FHLEVBQUFDLFVBQUFKLEVBQUFLLE9BRUFGLEVBQUFDLFdBQUEsR0FDQVgsRUFBQWEsR0FBQSxVQUlBLFFBQUFDLEdBQUFDLEdBQ0FQLFFBQUFDLElBQUEsMkJBQUFNLEdBZEFYLEVBQ0FZLElBQUEsc0JBQ0FDLEtBQUFYLEVBQUFRLEdBZ0JBLFFBQUFJLEtBQ0FWLFFBQUFDLElBQUEsUUFBQUMsRUFBQUMsVUFDQSxJQUFBUSxJQUNBQyxVQUFBLEdBQUFDLFNBQUEsR0FBQUMsU0FBQSxHQUFBQyxNQUFBLEtBQUEsRUFBQSxHQUFBQyxTQUFBLEVBQUFDLGFBQ0FDLEtBQUEsVUFBQUMsVUFBQSxJQUNBRCxLQUFBLGdCQUFBQyxVQUFBLElBQ0FELEtBQUEsZUFBQUMsVUFBQSxJQUNBRCxLQUFBLGFBQUFDLFVBQUEsSUFDQUQsS0FBQSx3QkFBQUMsVUFBQSxJQUNBRCxLQUFBLHNCQUFBQyxVQUFBLElBQ0FELEtBQUEsUUFBQUMsVUFBQSxJQUlBakIsR0FBQWtCLEtBQUFDLE9BQUFDLFFBQUFwQixFQUFBQyxVQUNBb0IsTUFBQSxnQ0FBQXJCLEVBQUFDLFVBQUEsd0VBQUFELEVBQUFDLFVBQ0EsZ0dBR0FELEVBQUFrQixLQUFBQyxPQUFBRyxLQUFBYixHQUlBLFFBQUFjLEdBQUFkLEdBQ0EsR0FBQWUsR0FBQXhCLEVBQUFrQixLQUFBQyxPQUFBTSxRQUFBaEIsRUFFQWUsSUFBQSxHQUNB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Q0E0QixrQkFBQSxpQkFBQSxTQUFBQyxHQUNBLE1BQUFBLEdBQUE1RCxJQUFBLDRCQUdBMEQsTUFBQSxRQUNBM0IsSUFBQSxRQUNBNEIsa0JBQUEsaUJBQUEsU0FBQUMsR0FDQSxNQUFBQSxHQUFBNUQsSUFBQSx3QkFFQWYsV0FBQSxtQkFFQXlFLE1BQUEsVUFDQTNCLElBQUEsVUFDQTRCLGtCQUFBLGlCQUFBLFNBQUFDLEdBQ0EsTUFBQUEsR0FBQTVELElBQUEsOEJBN0NBckIsUUFDQUMsT0FBQSxvQkFDQTBFLE9BQUFBLEdBRUFBLEVBQUFwRSxTQUNBLGlCQUNBIiwiZmlsZSI6ImNvZGVyZG9qby1zaWdudXAubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiYW5ndWxhci5tb2R1bGUoJ2NvZGVyZG9qby1zaWdudXAnLCBbJ3VpLnJvdXRlcicsICd1aS5ib290c3RyYXAnLCAndWkuYm9vdHN0cmFwLnRwbHMnXSk7IiwiKGZ1bmN0aW9uKCkge1xuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgnY29kZXJkb2pvLXNpZ251cCcpXG4gICAgICAgIC5jb250cm9sbGVyKCdBY2NlcHRDb250cm9sbGVyJywgQWNjZXB0Q29udHJvbGxlcik7XG5cbiAgICBBY2NlcHRDb250cm9sbGVyLiRpbmplY3QgPSBbXG4gICAgICAgICckc2NvcGUnLFxuICAgICAgICAnJHJvb3RTY29wZScsXG4gICAgICAgICckc3RhdGUnXG4gICAgXTtcblxuICAgIGZ1bmN0aW9uIEFjY2VwdENvbnRyb2xsZXIoJHNjb3BlLCAkcm9vdFNjb3BlLCAkc3RhdGUpIHtcbiAgICAgICAgdmFyIHZtID0gdGhpcztcblxuXG4gICAgfVxufSkoKTtcbiIsIihmdW5jdGlvbiAoKSB7XG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCdjb2RlcmRvam8tc2lnbnVwJylcbiAgICAgICAgLmNvbnRyb2xsZXIoJ0Zvcm1Db250cm9sbGVyJywgRm9ybUNvbnRyb2xsZXIpO1xuXG4gICAgRm9ybUNvbnRyb2xsZXIuJGluamVjdCA9IFtcbiAgICAgICAgJyRodHRwJyxcbiAgICAgICAgJyRzdGF0ZSdcbiAgICBdO1xuXG4gICAgZnVuY3Rpb24gRm9ybUNvbnRyb2xsZXIoJGh0dHAsICRzdGF0ZSkge1xuICAgICAgICB2YXIgdm0gPSB0aGlzO1xuXG4gICAgICAgIHZtLnNwb3RzTGVmdCA9ICRzdGF0ZS5wYXJhbXMuc3BvdHNMZWZ0O1xuXG4gICAgICAgIHZtLm1pbkRhdGUgPSBuZXcgRGF0ZSgxOTk4LCA5LCA1KTtcbiAgICAgICAgdm0ubWF4RGF0ZSA9IG5ldyBEYXRlKDIwMDgsIDksIDUpO1xuXG4gICAgICAgIHZtLmZvcm0gPSB7XG4gICAgICAgICAgICBuaW5qYXM6IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGZpcnN0TmFtZTogJycsIGxhc3ROYW1lOiAnJywgYmlydGhkYXk6IG5ldyBEYXRlKDIwMDgsIDksIDUpLCB1bmRlcjEyOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgYWN0aXZpdGllczogW1xuICAgICAgICAgICAgICAgICAgICAgIHsgbmFtZTogJ1NjcmF0Y2gnLCBzZWxlY3RlZDogZmFsc2UgfSxcbiAgICAgICAgICAgICAgICAgICAgICB7IG5hbWU6ICdFZGlzb24gUm9ib3RzJywgc2VsZWN0ZWQ6IGZhbHNlIH0sXG4gICAgICAgICAgICAgICAgICAgICAgeyBuYW1lOiAnUmFzcGJlcnJ5IFBpJywgc2VsZWN0ZWQ6IGZhbHNlIH0sXG4gICAgICAgICAgICAgICAgICAgICAgeyBuYW1lOiAnR2FtZSBNYWtlcicsIHNlbGVjdGVkOiBmYWxzZSB9LFxuICAgICAgICAgICAgICAgICAgICAgIHsgbmFtZTogJ0xFR08gTWluZHN0b3JtIFJvYm90cycsIHNlbGVjdGVkOiBmYWxzZSB9LFxuICAgICAgICAgICAgICAgICAgICAgIHsgbmFtZTogJ1dlYnNpdGUgRGV2ZWxvcG1lbnQnLCBzZWxlY3RlZDogZmFsc2UgfSxcbiAgICAgICAgICAgICAgICAgICAgICB7IG5hbWU6ICdPdGhlcicsIHNlbGVjdGVkOiBmYWxzZSB9XG4gICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgYndDb250YWN0OiB7IGZpcnN0TmFtZTogJycsIGxhc3ROYW1lOiAnJ30sXG4gICAgICAgICAgICBwYXJlbnQ6IHtcbiAgICAgICAgICAgICAgICBmaXJzdE5hbWU6ICcnLCBsYXN0TmFtZTogJycsIGVtYWlsOiAnJywgcGhvbmU6ICcnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcGhvdG9QZXJtaXNzaW9uOiBmYWxzZSxcbiAgICAgICAgICAgIGNvbW1lbnRzOiAnJ1xuICAgICAgICB9O1xuXG4gICAgICAgIHZtLmFkZCA9IGFkZDtcbiAgICAgICAgdm0ucmVtb3ZlID0gcmVtb3ZlO1xuICAgICAgICB2bS5yZWdpc3RlciA9IHJlZ2lzdGVyO1xuXG4gICAgICAgIGluaXRpYWxpc2UoKTtcblxuICAgICAgICBmdW5jdGlvbiBpbml0aWFsaXNlKCkge1xuICAgICAgICAgICRodHRwXG4gICAgICAgICAgICAuZ2V0KCcvYXBpL3JlZ2lzdGVyTmluamEnKVxuICAgICAgICAgICAgLnRoZW4oc3VjY2VzcywgZXJyb3IpO1xuXG4gICAgICAgICAgZnVuY3Rpb24gc3VjY2VzcyhyZXNwb25zZSkge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZygnc3VibWl0IGZvcm0gc3VjY2VzcycsIHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgdm0uc3BvdHNMZWZ0ID0gcmVzcG9uc2UubnVtYmVyO1xuXG4gICAgICAgICAgICAgIGlmKHZtLnNwb3RzTGVmdCA8PSAwKSB7XG4gICAgICAgICAgICAgICAgJHN0YXRlLmdvKCdjbG9zZWQnKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGZ1bmN0aW9uIGVycm9yKGVycikge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZ2V0IG51bWJlciBvZiBuaW5qYXMgZXJyJywgZXJyKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBhZGQoKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnU3BvdHMnLCB2bS5zcG90c0xlZnQpO1xuICAgICAgICAgICAgdmFyIG5pbmphID0ge1xuICAgICAgICAgICAgICAgIGZpcnN0TmFtZTogJycsIGxhc3ROYW1lOiAnJywgYmlydGhkYXk6IG5ldyBEYXRlKDIwMDgsIDksIDUpLCB1bmRlcjEyOiBmYWxzZSwgYWN0aXZpdGllczogW1xuICAgICAgICAgICAgICAgICAgeyBuYW1lOiAnU2NyYXRjaCcsIHNlbGVjdGVkOiBmYWxzZSB9LFxuICAgICAgICAgICAgICAgICAgeyBuYW1lOiAnRWRpc29uIFJvYm90cycsIHNlbGVjdGVkOiBmYWxzZSB9LFxuICAgICAgICAgICAgICAgICAgeyBuYW1lOiAnUmFzcGJlcnJ5IFBpJywgc2VsZWN0ZWQ6IGZhbHNlIH0sXG4gICAgICAgICAgICAgICAgICB7IG5hbWU6ICdHYW1lIE1ha2VyJywgc2VsZWN0ZWQ6IGZhbHNlIH0sXG4gICAgICAgICAgICAgICAgICB7IG5hbWU6ICdMRUdPIE1pbmRzdG9ybSBSb2JvdHMnLCBzZWxlY3RlZDogZmFsc2UgfSxcbiAgICAgICAgICAgICAgICAgIHsgbmFtZTogJ1dlYnNpdGUgRGV2ZWxvcG1lbnQnLCBzZWxlY3RlZDogZmFsc2UgfSxcbiAgICAgICAgICAgICAgICAgIHsgbmFtZTogJ090aGVyJywgc2VsZWN0ZWQ6IGZhbHNlIH1cbiAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBpZiAodm0uZm9ybS5uaW5qYXMubGVuZ3RoID49IHZtLnNwb3RzTGVmdCkge1xuICAgICAgICAgICAgICAgIGFsZXJ0KCdVbmZvcnR1bmF0ZWx5IHRoZXJlIGFyZSBvbmx5ICcgKyB2bS5zcG90c0xlZnQgKyAnIHNwb3RzIGxlZnQgZm9yIHRoaXMgZXZlbnQuIFRoZXJlZm9yZSwgeW91IGNhbm5vdCByZWdpc3RlciBtb3JlIHRoYW4gJyArIHZtLnNwb3RzTGVmdCArXG4gICAgICAgICAgICAgICAgICAgICcgbmluamFzIGF0IHRoaXMgdGltZS4gUGxlYXNlIGNvbnRhY3QgeW91ciBsb2NhbCBDb2RlckRvam8gY2hhbXBpb24gaWYgeW91IGhhdmUgYW55IHF1ZXN0aW9ucycpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdm0uZm9ybS5uaW5qYXMucHVzaChuaW5qYSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiByZW1vdmUobmluamEpIHtcbiAgICAgICAgICAgIHZhciBpbmRleCA9IHZtLmZvcm0ubmluamFzLmluZGV4T2YobmluamEpO1xuXG4gICAgICAgICAgICBpZiAoaW5kZXggPj0gMCkge1xuICAgICAgICAgICAgICAgIHZtLmZvcm0ubmluamFzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBjYWxjVW5kZXIxMihuaW5qYSkge1xuICAgICAgICAgICAgdmFyIGlzMTIgPSBuZXcgRGF0ZSAoMjAwMywgOSwgNSk7XG4gICAgICAgICAgICB2YXIgZGlmZiA9IE1hdGguYWJzKGlzMTIgLSBuaW5qYS5iaXJ0aGRheSk7XG5cbiAgICAgICAgICAgIHJldHVybiBkaWZmIDwgMDtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHJlZ2lzdGVyKCkge1xuICAgICAgICAgICAgaWYgKGNvbmZpcm0oJ0lzIGFsbCB0aGUgaW5mb3JtYXRpb24gY29ycmVjdD8gWW91IHdpbGwgbm90IGJlIGFibGUgdG8gZ28gYmFjayBhbmQgZWRpdCBpdC4nKSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHZtLmZvcm0pO1xuXG4gICAgICAgICAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IHZtLmZvcm0ubmluamFzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZtLmZvcm0ubmluamFzW2ldLnVuZGVyMTIgPSBjYWxjVW5kZXIxMih2bS5mb3JtLm5pbmphc1tpXSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyIHJlcSA9IHtcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgICAgIHVybDogJy9hcGkvcmVnaXN0ZXJOaW5qYScsXG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7Zm9ybTogdm0uZm9ybX1cbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgJGh0dHAocmVxKVxuICAgICAgICAgICAgICAgICAgICAudGhlbihzdWNjZXNzLCBlcnJvcik7XG5cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBzdWNjZXNzKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdzdWJtaXQgZm9ybSBzdWNjZXNzJywgcmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICAgICAkc3RhdGUuZ28oJ2FjY2VwdCcpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGVycm9yKGVycikge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnc3VibWl0IGZvcm0gZXJyJywgZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgJHN0YXRlLmdvKCdlcnJvcicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn0pKCk7XG4iLCIvLyBUT0RPOiB1cGRhdGUgdGhpc1xuYW5ndWxhci5tb2R1bGUoJ2NvZGVyZG9qby1zaWdudXAnKVxuLmNvbnRyb2xsZXIoJ1ZpZXdDb250cm9sbGVyJywgZnVuY3Rpb24oJHNjb3BlLCAkaHR0cCwgJHN0YXRlKSB7XG5cdCd1c2Ugc3RyaWN0Jztcblx0JHNjb3BlLm5pbmphQ291bnQgPSAwO1xuXG5cdCRzY29wZS5uaW5qYXMgPSB7fTtcblxuXHQkc2NvcGUuaXNVbmRlcjEyID0gZnVuY3Rpb24oZGF0ZSkge1xuXHRcdHZhciB0aW1lRGlmZiA9IE1hdGguYWJzKGRhdGUuZ2V0VGltZSgpIC0gbmV3IERhdGUoKS5nZXRUaW1lKCkpO1xuXHRcdHZhciBkaWZmWWVhcnMgPSBNYXRoLmNlaWwodGltZURpZmYgLyAoMTAwMCAqIDM2MDAgKiAyNCAqIDM2NSkpO1xuXG5cdFx0cmV0dXJuIGRpZmZZZWFycyA8IDEyO1xuXHR9XG5cblx0JHNjb3BlLmdldE5pbmphQ291bnQgPSBmdW5jdGlvbigpIHtcblx0XHRuaW5qYUNvdW50Kys7XG5cdFx0cmV0dXJuIG5pbmphQ291bnQ7XG5cdH07XG5cblx0JGh0dHAuZ2V0KCcvYXBpL25pbmphTGlzdCcpXG5cdC5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcblx0XHQkc2NvcGUubmluamFzID0gZGF0YTtcblxuXHRcdGZvcih2YXIgaSA9IDA7IGkgPCAkc2NvcGUubmluamFzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRmb3IodmFyIGogPSAwOyBqIDwgJHNjb3BlLm5pbmphc1tpXS5uaW5qYXMubGVuZ3RoOyBqKyspIHtcblx0XHRcdFx0JHNjb3BlLm5pbmphc1tpXS5uaW5qYXNbal0udW5kZXIxMiA9IGlzVW5kZXIxMigkc2NvcGUubmluamFzW2ldLm5pbmphc1tqXS5iaXJ0aGRheSk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9KVxuXHQuZXJyb3IoZnVuY3Rpb24oZGF0YSkge1xuXG5cdH0pO1xufSk7XG4iLCIoZnVuY3Rpb24gKCkge1xuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgnY29kZXJkb2pvLXNpZ251cCcpXG4gICAgICAgIC5jb25maWcoY29uZmlnKTtcblxuICAgIGNvbmZpZy4kaW5qZWN0ID0gW1xuICAgICAgICAnJHN0YXRlUHJvdmlkZXInLFxuICAgICAgICAnJHVybFJvdXRlclByb3ZpZGVyJ1xuICAgIF07XG5cbiAgICBmdW5jdGlvbiBjb25maWcoJHN0YXRlUHJvdmlkZXIsICR1cmxSb3V0ZXJQcm92aWRlcikge1xuICAgICAgICAkdXJsUm91dGVyUHJvdmlkZXIub3RoZXJ3aXNlKCcvY2xvc2VkJyk7XG5cbiAgICAgICAgJHN0YXRlUHJvdmlkZXJcbiAgICAgICAgICAgIC8vIC5zdGF0ZSgnZm9ybScsIHtcbiAgICAgICAgICAgIC8vICAgICB1cmw6ICcvZm9ybScsXG4gICAgICAgICAgICAvLyAgICAgdGVtcGxhdGVQcm92aWRlcjogZnVuY3Rpb24gKCR0ZW1wbGF0ZUNhY2hlKSB7XG4gICAgICAgICAgICAvLyAgICAgICAgIHJldHVybiAkdGVtcGxhdGVDYWNoZS5nZXQoJ2FwcC9mb3JtL2Zvcm0uaHRtbCcpO1xuICAgICAgICAgICAgLy8gICAgIH0sXG4gICAgICAgICAgICAvLyAgICAgY29udHJvbGxlcjogJ0Zvcm1Db250cm9sbGVyJyxcbiAgICAgICAgICAgIC8vICAgICBjb250cm9sbGVyQXM6ICd2bSdcbiAgICAgICAgICAgIC8vIH0pXG4gICAgICAgICAgICAvLyAuc3RhdGUoJ2FjY2VwdCcsIHtcbiAgICAgICAgICAgIC8vICAgICB1cmw6ICcvYWNjZXB0JyxcbiAgICAgICAgICAgIC8vICAgICB0ZW1wbGF0ZVByb3ZpZGVyOiBmdW5jdGlvbiAoJHRlbXBsYXRlQ2FjaGUpIHtcbiAgICAgICAgICAgIC8vICAgICAgICAgcmV0dXJuICR0ZW1wbGF0ZUNhY2hlLmdldCgnYXBwL2FjY2VwdC9hY2NlcHQuaHRtbCcpO1xuICAgICAgICAgICAgLy8gICAgIH0sXG4gICAgICAgICAgICAvLyAgICAgY29udHJvbGxlcjogJ0FjY2VwdENvbnRyb2xsZXInLFxuICAgICAgICAgICAgLy8gICAgIGNvbnRyb2xsZXJBczogJ3ZtJ1xuICAgICAgICAgICAgLy8gfSlcbiAgICAgICAgICAgIC5zdGF0ZSgnZXJyb3InLCB7XG4gICAgICAgICAgICAgICAgdXJsOiAnL2Vycm9yJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVByb3ZpZGVyOiBmdW5jdGlvbiAoJHRlbXBsYXRlQ2FjaGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICR0ZW1wbGF0ZUNhY2hlLmdldCgnYXBwL2Vycm9yL2Vycm9yLmh0bWwnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnN0YXRlKCd2aWV3Jywge1xuICAgICAgICAgICAgICAgIHVybDogJy92aWV3JyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVByb3ZpZGVyOiBmdW5jdGlvbiAoJHRlbXBsYXRlQ2FjaGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICR0ZW1wbGF0ZUNhY2hlLmdldCgnYXBwL3ZpZXcvdmlldy5odG1sJyk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnVmlld0NvbnRyb2xsZXInXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnN0YXRlKCdjbG9zZWQnLCB7XG4gICAgICAgICAgICAgICAgdXJsOiAnL2Nsb3NlZCcsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVQcm92aWRlcjogZnVuY3Rpb24gKCR0ZW1wbGF0ZUNhY2hlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAkdGVtcGxhdGVDYWNoZS5nZXQoJ2FwcC9jbG9zZWQvY2xvc2VkLmh0bWwnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICB9XG59KSgpO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
