angular.module("coder-dojo-signup",["ui.router","ui.bootstrap","ui.bootstrap.tpls"]),function(){function e(e,t,o){}angular.module("coder-dojo-signup").controller("AcceptController",e),e.$inject=["$scope","$rootScope","$state"]}(),function(){function e(e,t){function o(){console.log("Spots",s.spotsLeft);var e={firstName:"",lastName:"",birthday:new Date(2008,9,5),under12:!1,activities:[{name:"Scratch",selected:!1},{name:"Edison Robots",selected:!1},{name:"LEGO Mindstorm Robots",selected:!1},{name:"Website Development",selected:!1},{name:"Other",selected:!1}]};s.form.ninjas.length>=s.spotsLeft?alert("Unfortunately there are only "+s.spotsLeft+" spots left for this event. Therefore, you cannot register more than "+s.spotsLeft+" ninjas at this time. Please contact your local Coder Dojo champion if you have any questions"):s.form.ninjas.push(e)}function r(e){var t=s.form.ninjas.indexOf(e);t>=0&&s.form.ninjas.splice(t,1)}function n(e){var t=new Date(2003,9,5),o=Math.abs(t-e.birthday);return 0>o}function a(){function o(e){console.log("submit form success",e),t.go("accept")}function r(e){console.log("submit form err",e),t.go("error")}if(confirm("Is all the information correct? You will not be able to go back and edit it.")){console.log(s.form);for(var a=0;a<s.form.ninjas.length;a++)s.form.ninjas[a].under12=n(s.form.ninjas[a]);var i={method:"POST",url:"/api/registerNinja",header:{"Content-Type":"application/json"},data:{form:s.form,code:s.code}};e(i).then(o,r)}}var s=this;s.auth=t.params.auth,s.code=t.params.code,s.isBw=t.params.code.indexOf("bw")>=0,s.spotsLeft=t.params.spotsLeft,s.auth||(console.log("vm.auth not true"),t.go("register")),s.minDate=new Date(1998,9,5),s.maxDate=new Date(2008,9,5),s.form={ninjas:[{firstName:"",lastName:"",birthday:new Date(2008,9,5),under12:!1,activities:[{name:"Scratch",selected:!1},{name:"Edison Robots",selected:!1},{name:"LEGO Mindstorm Robots",selected:!1},{name:"Website Development",selected:!1},{name:"Other",selected:!1}]}],dojo:s.isBw?"Bankwest":"",bwContact:{firstName:"",lastName:""},parent:{firstName:"",lastName:"",email:"",phone:""},photoPermission:!1,comments:""},s.add=o,s.remove=r,s.register=a}angular.module("coder-dojo-signup").controller("FormController",e),e.$inject=["$http","$state"]}(),angular.module("coder-dojo-signup").controller("ViewController",["$scope","$http","$state",function(e,t,o){"use strict";e.ninjaCount=0,e.ninjas={},e.getNinjaCount=function(){return ninjaCount++,ninjaCount},t.get("/api/ninjaList").success(function(t){e.ninjas=t}).error(function(e){})}]),function(){function e(e,t){function o(){function o(e){console.log(e);var o={code:e.data.code,spotsLeft:e.data.spotsLeft,auth:!0};t.go("form",o)}function n(e){console.log(e),401===e.status?alert("Sorry, that code is invalid, please check that you typed it correctly"):403===e.status?t.go("closed"):t.go("error")}r.code=r.code.trim().toLowerCase(),r.code=r.code.replace(/\s+/g,""),console.log(r.code);var a={method:"POST",url:"/api/validateCodes",header:{"Content-Type":"application/json"},data:{text:r.code}};e(a).then(o,n)}var r=this;r.code="",r.submit=o}angular.module("coder-dojo-signup").controller("RegisterController",e),e.$inject=["$http","$state"]}(),function(){function e(e,t){t.otherwise("/register"),e.state("register",{url:"/register",templateProvider:["$templateCache",function(e){return e.get("app/register/register.html")}],controller:"RegisterController",controllerAs:"vm"}).state("form",{url:"/form",params:{code:"",spotsLeft:0,auth:!1},templateProvider:["$templateCache",function(e){return e.get("app/form/form.html")}],controller:"FormController",controllerAs:"vm"}).state("accept",{url:"/accept",templateProvider:["$templateCache",function(e){return e.get("app/accept/accept.html")}],controller:"AcceptController",controllerAs:"vm"}).state("error",{url:"/error",templateProvider:["$templateCache",function(e){return e.get("app/error/error.html")}]}).state("closed",{url:"/closed",templateProvider:["$templateCache",function(e){return e.get("app/closed/closed.html")}]}).state("view",{url:"/view",templateProvider:["$templateCache",function(e){return e.get("app/view/view.html")}],controller:"ViewController"})}angular.module("coder-dojo-signup").config(e),e.$inject=["$stateProvider","$urlRouterProvider"]}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImFjY2VwdC9hY2NlcHRDb250cm9sbGVyLmpzIiwiZm9ybS9mb3JtQ29udHJvbGxlci5qcyIsInZpZXcvdmlld0NvbnRyb2xsZXIuanMiLCJyZWdpc3Rlci9yZWdpc3RlckNvbnRyb2xsZXIuanMiLCJjb21wb25lbnRzL2NvbmZpZy9jb25maWcuanMiXSwibmFtZXMiOlsiYW5ndWxhciIsIm1vZHVsZSIsIkFjY2VwdENvbnRyb2xsZXIiLCIkc2NvcGUiLCIkcm9vdFNjb3BlIiwiJHN0YXRlIiwiY29udHJvbGxlciIsIiRpbmplY3QiLCJGb3JtQ29udHJvbGxlciIsIiRodHRwIiwiYWRkIiwiY29uc29sZSIsImxvZyIsInZtIiwic3BvdHNMZWZ0IiwibmluamEiLCJmaXJzdE5hbWUiLCJsYXN0TmFtZSIsImJpcnRoZGF5IiwiRGF0ZSIsInVuZGVyMTIiLCJhY3Rpdml0aWVzIiwibmFtZSIsInNlbGVjdGVkIiwiZm9ybSIsIm5pbmphcyIsImxlbmd0aCIsImFsZXJ0IiwicHVzaCIsInJlbW92ZSIsImluZGV4IiwiaW5kZXhPZiIsInNwbGljZSIsImNhbGNVbmRlcjEyIiwiaXMxMiIsImRpZmYiLCJNYXRoIiwiYWJzIiwicmVnaXN0ZXIiLCJzdWNjZXNzIiwicmVzcG9uc2UiLCJnbyIsImVycm9yIiwiZXJyIiwiY29uZmlybSIsImkiLCJyZXEiLCJtZXRob2QiLCJ1cmwiLCJoZWFkZXIiLCJDb250ZW50LVR5cGUiLCJkYXRhIiwiY29kZSIsInRoZW4iLCJ0aGlzIiwiYXV0aCIsInBhcmFtcyIsImlzQnciLCJtaW5EYXRlIiwibWF4RGF0ZSIsImRvam8iLCJid0NvbnRhY3QiLCJwYXJlbnQiLCJlbWFpbCIsInBob25lIiwicGhvdG9QZXJtaXNzaW9uIiwiY29tbWVudHMiLCJuaW5qYUNvdW50IiwiZ2V0TmluamFDb3VudCIsImdldCIsIlJlZ2lzdGVyQ29udHJvbGxlciIsInN1Ym1pdCIsInN0YXR1cyIsInRyaW0iLCJ0b0xvd2VyQ2FzZSIsInJlcGxhY2UiLCJ0ZXh0IiwiY29uZmlnIiwiJHN0YXRlUHJvdmlkZXIiLCIkdXJsUm91dGVyUHJvdmlkZXIiLCJvdGhlcndpc2UiLCJzdGF0ZSIsInRlbXBsYXRlUHJvdmlkZXIiLCIkdGVtcGxhdGVDYWNoZSIsImNvbnRyb2xsZXJBcyJdLCJtYXBwaW5ncyI6IkFBQUFBLFFBQUFDLE9BQUEscUJBQUEsWUFBQSxlQUFBLHNCQ0FBLFdBV0EsUUFBQUMsR0FBQUMsRUFBQUMsRUFBQUMsSUFWQUwsUUFDQUMsT0FBQSxxQkFDQUssV0FBQSxtQkFBQUosR0FFQUEsRUFBQUssU0FDQSxTQUNBLGFBQ0EsYUNSQSxXQVVBLFFBQUFDLEdBQUFDLEVBQUFKLEdBeUNBLFFBQUFLLEtBQ0FDLFFBQUFDLElBQUEsUUFBQUMsRUFBQUMsVUFDQSxJQUFBQyxJQUNBQyxVQUFBLEdBQUFDLFNBQUEsR0FBQUMsU0FBQSxHQUFBQyxNQUFBLEtBQUEsRUFBQSxHQUFBQyxTQUFBLEVBQUFDLGFBQ0FDLEtBQUEsVUFBQUMsVUFBQSxJQUNBRCxLQUFBLGdCQUFBQyxVQUFBLElBQ0FELEtBQUEsd0JBQUFDLFVBQUEsSUFDQUQsS0FBQSxzQkFBQUMsVUFBQSxJQUNBRCxLQUFBLFFBQUFDLFVBQUEsSUFJQVYsR0FBQVcsS0FBQUMsT0FBQUMsUUFBQWIsRUFBQUMsVUFDQWEsTUFBQSxnQ0FBQWQsRUFBQUMsVUFBQSx3RUFBQUQsRUFBQUMsVUFDQSxpR0FHQUQsRUFBQVcsS0FBQUMsT0FBQUcsS0FBQWIsR0FJQSxRQUFBYyxHQUFBZCxHQUNBLEdBQUFlLEdBQUFqQixFQUFBVyxLQUFBQyxPQUFBTSxRQUFBaEIsRUFFQWUsSUFBQSxHQUNBakIsRUFBQVcsS0FBQUMsT0FBQU8sT0FBQUYsRUFBQSxHQUlBLFFBQUFHLEdBQUFsQixHQUNBLEdBQUFtQixHQUFBLEdBQUFmLE1BQUEsS0FBQSxFQUFBLEdBQ0FnQixFQUFBQyxLQUFBQyxJQUFBSCxFQUFBbkIsRUFBQUcsU0FFQSxPQUFBLEdBQUFpQixFQUdBLFFBQUFHLEtBb0JBLFFBQUFDLEdBQUFD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ImZpbGUiOiJjb2Rlci1kb2pvLXNpZ251cC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJhbmd1bGFyLm1vZHVsZSgnY29kZXItZG9qby1zaWdudXAnLCBbJ3VpLnJvdXRlcicsICd1aS5ib290c3RyYXAnLCAndWkuYm9vdHN0cmFwLnRwbHMnXSk7IiwiKGZ1bmN0aW9uKCkge1xuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgnY29kZXItZG9qby1zaWdudXAnKVxuICAgICAgICAuY29udHJvbGxlcignQWNjZXB0Q29udHJvbGxlcicsIEFjY2VwdENvbnRyb2xsZXIpO1xuXG4gICAgQWNjZXB0Q29udHJvbGxlci4kaW5qZWN0ID0gW1xuICAgICAgICAnJHNjb3BlJyxcbiAgICAgICAgJyRyb290U2NvcGUnLFxuICAgICAgICAnJHN0YXRlJ1xuICAgIF07XG5cbiAgICBmdW5jdGlvbiBBY2NlcHRDb250cm9sbGVyKCRzY29wZSwgJHJvb3RTY29wZSwgJHN0YXRlKSB7XG4gICAgICAgIHZhciB2bSA9IHRoaXM7XG5cblxuICAgIH1cbn0pKCk7XG4iLCIoZnVuY3Rpb24gKCkge1xuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgnY29kZXItZG9qby1zaWdudXAnKVxuICAgICAgICAuY29udHJvbGxlcignRm9ybUNvbnRyb2xsZXInLCBGb3JtQ29udHJvbGxlcik7XG5cbiAgICBGb3JtQ29udHJvbGxlci4kaW5qZWN0ID0gW1xuICAgICAgICAnJGh0dHAnLFxuICAgICAgICAnJHN0YXRlJ1xuICAgIF07XG5cbiAgICBmdW5jdGlvbiBGb3JtQ29udHJvbGxlcigkaHR0cCwgJHN0YXRlKSB7XG4gICAgICAgIHZhciB2bSA9IHRoaXM7XG5cbiAgICAgICAgdm0uYXV0aCA9ICRzdGF0ZS5wYXJhbXMuYXV0aDtcbiAgICAgICAgdm0uY29kZSA9ICRzdGF0ZS5wYXJhbXMuY29kZTtcbiAgICAgICAgdm0uaXNCdyA9ICRzdGF0ZS5wYXJhbXMuY29kZS5pbmRleE9mKCdidycpID49IDA7XG4gICAgICAgIHZtLnNwb3RzTGVmdCA9ICRzdGF0ZS5wYXJhbXMuc3BvdHNMZWZ0O1xuXG4gICAgICAgIGlmICghdm0uYXV0aCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ3ZtLmF1dGggbm90IHRydWUnKTtcbiAgICAgICAgICAgICRzdGF0ZS5nbygncmVnaXN0ZXInKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZtLm1pbkRhdGUgPSBuZXcgRGF0ZSgxOTk4LCA5LCA1KTtcbiAgICAgICAgdm0ubWF4RGF0ZSA9IG5ldyBEYXRlKDIwMDgsIDksIDUpO1xuXG4gICAgICAgIHZtLmZvcm0gPSB7XG4gICAgICAgICAgICBuaW5qYXM6IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGZpcnN0TmFtZTogJycsIGxhc3ROYW1lOiAnJywgYmlydGhkYXk6IG5ldyBEYXRlKDIwMDgsIDksIDUpLCB1bmRlcjEyOiBmYWxzZSwgYWN0aXZpdGllczogW1xuICAgICAgICAgICAgICAgICAgICB7IG5hbWU6ICdTY3JhdGNoJywgc2VsZWN0ZWQ6IGZhbHNlIH0sXG4gICAgICAgICAgICAgICAgICAgIHsgbmFtZTogJ0VkaXNvbiBSb2JvdHMnLCBzZWxlY3RlZDogZmFsc2UgfSxcbiAgICAgICAgICAgICAgICAgICAgeyBuYW1lOiAnTEVHTyBNaW5kc3Rvcm0gUm9ib3RzJywgc2VsZWN0ZWQ6IGZhbHNlIH0sXG4gICAgICAgICAgICAgICAgICAgIHsgbmFtZTogJ1dlYnNpdGUgRGV2ZWxvcG1lbnQnLCBzZWxlY3RlZDogZmFsc2UgfSxcbiAgICAgICAgICAgICAgICAgICAgeyBuYW1lOiAnT3RoZXInLCBzZWxlY3RlZDogZmFsc2UgfVxuICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgZG9qbzogdm0uaXNCdyA/ICdCYW5rd2VzdCcgOiAnJyxcbiAgICAgICAgICAgIGJ3Q29udGFjdDogeyBmaXJzdE5hbWU6ICcnLCBsYXN0TmFtZTogJyd9LFxuICAgICAgICAgICAgcGFyZW50OiB7XG4gICAgICAgICAgICAgICAgZmlyc3ROYW1lOiAnJywgbGFzdE5hbWU6ICcnLCBlbWFpbDogJycsIHBob25lOiAnJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHBob3RvUGVybWlzc2lvbjogZmFsc2UsXG4gICAgICAgICAgICBjb21tZW50czogJydcbiAgICAgICAgfTtcblxuICAgICAgICB2bS5hZGQgPSBhZGQ7XG4gICAgICAgIHZtLnJlbW92ZSA9IHJlbW92ZTtcbiAgICAgICAgdm0ucmVnaXN0ZXIgPSByZWdpc3RlcjtcblxuICAgICAgICBmdW5jdGlvbiBhZGQoKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnU3BvdHMnLCB2bS5zcG90c0xlZnQpO1xuICAgICAgICAgICAgdmFyIG5pbmphID0ge1xuICAgICAgICAgICAgICAgIGZpcnN0TmFtZTogJycsIGxhc3ROYW1lOiAnJywgYmlydGhkYXk6IG5ldyBEYXRlKDIwMDgsIDksIDUpLCB1bmRlcjEyOiBmYWxzZSwgYWN0aXZpdGllczogW1xuICAgICAgICAgICAgICAgICAgICB7IG5hbWU6ICdTY3JhdGNoJywgc2VsZWN0ZWQ6IGZhbHNlIH0sXG4gICAgICAgICAgICAgICAgICAgIHsgbmFtZTogJ0VkaXNvbiBSb2JvdHMnLCBzZWxlY3RlZDogZmFsc2UgfSxcbiAgICAgICAgICAgICAgICAgICAgeyBuYW1lOiAnTEVHTyBNaW5kc3Rvcm0gUm9ib3RzJywgc2VsZWN0ZWQ6IGZhbHNlIH0sXG4gICAgICAgICAgICAgICAgICAgIHsgbmFtZTogJ1dlYnNpdGUgRGV2ZWxvcG1lbnQnLCBzZWxlY3RlZDogZmFsc2UgfSxcbiAgICAgICAgICAgICAgICAgICAgeyBuYW1lOiAnT3RoZXInLCBzZWxlY3RlZDogZmFsc2UgfVxuICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGlmICh2bS5mb3JtLm5pbmphcy5sZW5ndGggPj0gdm0uc3BvdHNMZWZ0KSB7XG4gICAgICAgICAgICAgICAgYWxlcnQoJ1VuZm9ydHVuYXRlbHkgdGhlcmUgYXJlIG9ubHkgJyArIHZtLnNwb3RzTGVmdCArICcgc3BvdHMgbGVmdCBmb3IgdGhpcyBldmVudC4gVGhlcmVmb3JlLCB5b3UgY2Fubm90IHJlZ2lzdGVyIG1vcmUgdGhhbiAnICsgdm0uc3BvdHNMZWZ0ICtcbiAgICAgICAgICAgICAgICAgICAgJyBuaW5qYXMgYXQgdGhpcyB0aW1lLiBQbGVhc2UgY29udGFjdCB5b3VyIGxvY2FsIENvZGVyIERvam8gY2hhbXBpb24gaWYgeW91IGhhdmUgYW55IHF1ZXN0aW9ucycpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdm0uZm9ybS5uaW5qYXMucHVzaChuaW5qYSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiByZW1vdmUobmluamEpIHtcbiAgICAgICAgICAgIHZhciBpbmRleCA9IHZtLmZvcm0ubmluamFzLmluZGV4T2YobmluamEpO1xuXG4gICAgICAgICAgICBpZiAoaW5kZXggPj0gMCkge1xuICAgICAgICAgICAgICAgIHZtLmZvcm0ubmluamFzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBjYWxjVW5kZXIxMihuaW5qYSkge1xuICAgICAgICAgICAgdmFyIGlzMTIgPSBuZXcgRGF0ZSAoMjAwMywgOSwgNSk7XG4gICAgICAgICAgICB2YXIgZGlmZiA9IE1hdGguYWJzKGlzMTIgLSBuaW5qYS5iaXJ0aGRheSk7XG5cbiAgICAgICAgICAgIHJldHVybiBkaWZmIDwgMDtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHJlZ2lzdGVyKCkge1xuICAgICAgICAgICAgaWYgKGNvbmZpcm0oJ0lzIGFsbCB0aGUgaW5mb3JtYXRpb24gY29ycmVjdD8gWW91IHdpbGwgbm90IGJlIGFibGUgdG8gZ28gYmFjayBhbmQgZWRpdCBpdC4nKSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHZtLmZvcm0pO1xuXG4gICAgICAgICAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IHZtLmZvcm0ubmluamFzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZtLmZvcm0ubmluamFzW2ldLnVuZGVyMTIgPSBjYWxjVW5kZXIxMih2bS5mb3JtLm5pbmphc1tpXSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyIHJlcSA9IHtcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgICAgIHVybDogJy9hcGkvcmVnaXN0ZXJOaW5qYScsXG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7Zm9ybTogdm0uZm9ybSwgY29kZTogdm0uY29kZX1cbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgJGh0dHAocmVxKVxuICAgICAgICAgICAgICAgICAgICAudGhlbihzdWNjZXNzLCBlcnJvcik7XG5cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBzdWNjZXNzKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdzdWJtaXQgZm9ybSBzdWNjZXNzJywgcmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICAgICAkc3RhdGUuZ28oJ2FjY2VwdCcpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGVycm9yKGVycikge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnc3VibWl0IGZvcm0gZXJyJywgZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgJHN0YXRlLmdvKCdlcnJvcicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn0pKCk7IiwiLy8gVE9ETzogdXBkYXRlIHRoaXNcbmFuZ3VsYXIubW9kdWxlKCdjb2Rlci1kb2pvLXNpZ251cCcpXG4uY29udHJvbGxlcignVmlld0NvbnRyb2xsZXInLCBmdW5jdGlvbigkc2NvcGUsICRodHRwLCAkc3RhdGUpIHtcblx0J3VzZSBzdHJpY3QnO1xuXHQkc2NvcGUubmluamFDb3VudCA9IDA7XG5cblx0JHNjb3BlLm5pbmphcyA9IHt9O1xuXG5cdCRzY29wZS5nZXROaW5qYUNvdW50ID0gZnVuY3Rpb24oKSB7XG5cdFx0bmluamFDb3VudCsrO1xuXHRcdHJldHVybiBuaW5qYUNvdW50O1xuXHR9O1xuXG5cdCRodHRwLmdldCgnL2FwaS9uaW5qYUxpc3QnKVxuXHQuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XG5cdFx0JHNjb3BlLm5pbmphcyA9IGRhdGE7XG5cdH0pXG5cdC5lcnJvcihmdW5jdGlvbihkYXRhKSB7XG5cblx0fSk7XG59KTsiLCIoZnVuY3Rpb24gKCkge1xuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgnY29kZXItZG9qby1zaWdudXAnKVxuICAgICAgICAuY29udHJvbGxlcignUmVnaXN0ZXJDb250cm9sbGVyJywgUmVnaXN0ZXJDb250cm9sbGVyKTtcblxuICAgIFJlZ2lzdGVyQ29udHJvbGxlci4kaW5qZWN0ID0gW1xuICAgICAgICAnJGh0dHAnLFxuICAgICAgICAnJHN0YXRlJ1xuICAgIF07XG5cbiAgICBmdW5jdGlvbiBSZWdpc3RlckNvbnRyb2xsZXIoJGh0dHAsICRzdGF0ZSkge1xuICAgICAgICB2YXIgdm0gPSB0aGlzO1xuXG4gICAgICAgIHZtLmNvZGUgPSAnJztcblxuICAgICAgICB2bS5zdWJtaXQgPSBzdWJtaXQ7XG5cbiAgICAgICAgZnVuY3Rpb24gc3VibWl0KCkge1xuICAgICAgICAgICAgdm0uY29kZSA9IHZtLmNvZGUudHJpbSgpLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICB2bS5jb2RlID0gdm0uY29kZS5yZXBsYWNlKC9cXHMrL2csICcnKTtcblxuICAgICAgICAgICAgY29uc29sZS5sb2codm0uY29kZSk7XG5cbiAgICAgICAgICAgIHZhciByZXEgPSB7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgdXJsOiAnL2FwaS92YWxpZGF0ZUNvZGVzJyxcbiAgICAgICAgICAgICAgICBoZWFkZXI6IHtcbiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZGF0YToge3RleHQ6IHZtLmNvZGV9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAkaHR0cChyZXEpXG4gICAgICAgICAgICAgICAgLnRoZW4oc3VjY2VzcywgZXJyb3IpO1xuXG4gICAgICAgICAgICBmdW5jdGlvbiBzdWNjZXNzKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpO1xuXG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSB7Y29kZTogcmVzcG9uc2UuZGF0YS5jb2RlLCBzcG90c0xlZnQ6IHJlc3BvbnNlLmRhdGEuc3BvdHNMZWZ0LCBhdXRoOiB0cnVlfTtcbiAgICAgICAgICAgICAgICAkc3RhdGUuZ28oJ2Zvcm0nLCBkYXRhKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gZXJyb3IoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG5cbiAgICAgICAgICAgICAgICBpZiAoZXJyb3Iuc3RhdHVzID09PSA0MDEpIHtcbiAgICAgICAgICAgICAgICAgICAgYWxlcnQoJ1NvcnJ5LCB0aGF0IGNvZGUgaXMgaW52YWxpZCwgcGxlYXNlIGNoZWNrIHRoYXQgeW91IHR5cGVkIGl0IGNvcnJlY3RseScpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChlcnJvci5zdGF0dXMgPT09IDQwMykge1xuICAgICAgICAgICAgICAgICAgICAkc3RhdGUuZ28oJ2Nsb3NlZCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgJHN0YXRlLmdvKCdlcnJvcicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICB9XG4gICAgfVxufSkoKTtcbiIsIihmdW5jdGlvbiAoKSB7XG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCdjb2Rlci1kb2pvLXNpZ251cCcpXG4gICAgICAgIC5jb25maWcoY29uZmlnKTtcblxuICAgIGNvbmZpZy4kaW5qZWN0ID0gW1xuICAgICAgICAnJHN0YXRlUHJvdmlkZXInLFxuICAgICAgICAnJHVybFJvdXRlclByb3ZpZGVyJ1xuICAgIF07XG5cbiAgICBmdW5jdGlvbiBjb25maWcoJHN0YXRlUHJvdmlkZXIsICR1cmxSb3V0ZXJQcm92aWRlcikge1xuICAgICAgICAkdXJsUm91dGVyUHJvdmlkZXIub3RoZXJ3aXNlKCcvcmVnaXN0ZXInKTtcblxuICAgICAgICAkc3RhdGVQcm92aWRlclxuICAgICAgICAgICAgLnN0YXRlKCdyZWdpc3RlcicsIHtcbiAgICAgICAgICAgICAgICB1cmw6ICcvcmVnaXN0ZXInLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlUHJvdmlkZXI6IGZ1bmN0aW9uICgkdGVtcGxhdGVDYWNoZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHRlbXBsYXRlQ2FjaGUuZ2V0KCdhcHAvcmVnaXN0ZXIvcmVnaXN0ZXIuaHRtbCcpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ1JlZ2lzdGVyQ29udHJvbGxlcicsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnN0YXRlKCdmb3JtJywge1xuICAgICAgICAgICAgICAgIHVybDogJy9mb3JtJyxcbiAgICAgICAgICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogJycsXG4gICAgICAgICAgICAgICAgICAgIHNwb3RzTGVmdDogMCxcbiAgICAgICAgICAgICAgICAgICAgYXV0aDogZmFsc2VcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlUHJvdmlkZXI6IGZ1bmN0aW9uICgkdGVtcGxhdGVDYWNoZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHRlbXBsYXRlQ2FjaGUuZ2V0KCdhcHAvZm9ybS9mb3JtLmh0bWwnKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdGb3JtQ29udHJvbGxlcicsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnN0YXRlKCdhY2NlcHQnLCB7XG4gICAgICAgICAgICAgICAgdXJsOiAnL2FjY2VwdCcsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVQcm92aWRlcjogZnVuY3Rpb24gKCR0ZW1wbGF0ZUNhY2hlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAkdGVtcGxhdGVDYWNoZS5nZXQoJ2FwcC9hY2NlcHQvYWNjZXB0Lmh0bWwnKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdBY2NlcHRDb250cm9sbGVyJyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyQXM6ICd2bSdcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuc3RhdGUoJ2Vycm9yJywge1xuICAgICAgICAgICAgICAgIHVybDogJy9lcnJvcicsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVQcm92aWRlcjogZnVuY3Rpb24gKCR0ZW1wbGF0ZUNhY2hlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAkdGVtcGxhdGVDYWNoZS5nZXQoJ2FwcC9lcnJvci9lcnJvci5odG1sJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5zdGF0ZSgnY2xvc2VkJywge1xuICAgICAgICAgICAgICAgIHVybDogJy9jbG9zZWQnLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlUHJvdmlkZXI6IGZ1bmN0aW9uICgkdGVtcGxhdGVDYWNoZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHRlbXBsYXRlQ2FjaGUuZ2V0KCdhcHAvY2xvc2VkL2Nsb3NlZC5odG1sJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5zdGF0ZSgndmlldycsIHtcbiAgICAgICAgICAgICAgICB1cmw6ICcvdmlldycsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVQcm92aWRlcjogZnVuY3Rpb24gKCR0ZW1wbGF0ZUNhY2hlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAkdGVtcGxhdGVDYWNoZS5nZXQoJ2FwcC92aWV3L3ZpZXcuaHRtbCcpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ1ZpZXdDb250cm9sbGVyJ1xuICAgICAgICAgICAgfSk7XG4gICAgfVxufSkoKTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==